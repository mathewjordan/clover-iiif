"use strict";var ei=Object.create;var Me=Object.defineProperty;var ti=Object.getOwnPropertyDescriptor;var ri=Object.getOwnPropertyNames;var ni=Object.getPrototypeOf,oi=Object.prototype.hasOwnProperty;var ii=(t,e,r)=>e in t?Me(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ai=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),si=(t,e)=>{for(var r in e)Me(t,r,{get:e[r],enumerable:!0})},Qt=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of ri(e))!oi.call(t,o)&&o!==r&&Me(t,o,{get:()=>e[o],enumerable:!(n=ti(e,o))||n.enumerable});return t};var y=(t,e,r)=>(r=t!=null?ei(ni(t)):{},Qt(e||!t||!t.__esModule?Me(r,"default",{value:t,enumerable:!0}):r,t)),li=t=>Qt(Me({},"__esModule",{value:!0}),t);var V=(t,e,r)=>(ii(t,typeof e!="symbol"?e+"":e,r),r);var Mr=ai((ze,Pr)=>{(function(t,e){typeof ze=="object"&&typeof Pr!="undefined"?e(ze):typeof define=="function"&&define.amd?define(["exports"],e):e((t=t||self).TypesafeActions={})})(ze,function(t){"use strict";function e(c){return c==null}function r(c){throw new Error("Argument "+c+" is empty.")}function n(c){return typeof c=="function"&&"getType"in c}function o(c){throw new Error("Argument "+c+' is invalid, it should be an action-creator instance from "typesafe-actions"')}function i(c,u){if(c==null)throw new Error("Argument contains array with empty element at index "+u);if(c.getType==null)throw new Error("Argument contains array with invalid element at index "+u+', it should be an action-creator instance from "typesafe-actions"')}function a(c){return typeof c=="string"||typeof c=="symbol"}function s(c){return!a(c)}function l(c){throw new Error("Argument "+c+" is invalid, it should be an action type of type: string | symbol")}function p(c,u){if(c==null)throw new Error("Argument contains array with empty element at index "+u);if(typeof c!="string"&&typeof c!="symbol")throw new Error("Argument contains array with invalid element at index "+u+", it should be of type: string | symbol")}function v(c,u,m,C){return e(c)&&r(1),s(c)&&o(1),{type:c,payload:u,meta:m,error:C}}function h(c,u){return e(c)&&r(1),s(c)&&l(1),Object.assign(function(){var m=u!=null?u.apply(void 0,arguments):void 0;return Object.assign({type:c},m)},{getType:function(){return c},toString:function(){return c}})}function b(c,u,m){return e(c)&&r(1),s(c)&&l(1),function(){return h(c,function(){var C=arguments.length<=0?void 0:arguments[0],S=arguments.length<=1?void 0:arguments[1];return u==null&&m==null||(C=u!=null?u.apply(void 0,arguments):void 0,S=m!=null?m.apply(void 0,arguments):void 0),Object.assign({},C!==void 0&&{payload:C},{},S!==void 0&&{meta:S})})}}function w(c){return e(c)&&r(1),n(c)||o(1),c.getType()}function g(c,u){e(c)&&r(1),s(c)&&l(1);var m=u!=null?u(c):function(){return{type:c}};return Object.assign(m,{getType:function(){return c},toString:function(){return c}})}var x={createAction:function(c,u){var m=u==null?function(){return v(c)}:u(v.bind(null,c));return Object.assign(m,{getType:function(){return c},toString:function(){return c}})},createCustomAction:g,createStandardAction:function(c){return e(c)&&r(1),s(c)&&l(1),Object.assign(function(){return g(c,function(u){return function(m,C){return{type:u,payload:m,meta:C}}})},{map:function(u){return g(c,function(m){return function(C,S){return Object.assign(u(C,S),{type:m})}})}})}};t.action=v,t.createAction=b,t.createAsyncAction=function(c,u,m,C){return function(){var S=[c,u,m,C].map(function(A,H){return Array.isArray(A)?b(A[0],A[1],A[2])():typeof A=="string"||typeof A=="symbol"?b(A)():void(H<3&&function(ye){throw new Error("Argument "+ye+' is invalid, it should be an action type of "string | symbol" or a tuple of "[string | symbol, Function, Function?]"')}(H))});return{request:S[0],success:S[1],failure:S[2],cancel:S[3]}}},t.createCustomAction=h,t.createReducer=function c(u,m){m===void 0&&(m={});var C=Object.assign({},m),S=function(A,H){var ye=Array.isArray(A)?A:[A],Gt={};return ye.map(function(ve,Xo){return n(ve)?w(ve):a(ve)?ve:function(Jo){throw new Error("Argument "+Jo+' is invalid, it should be an action-creator instance from "typesafe-actions" or action type of type: string | symbol')}(Xo+1)}).forEach(function(ve){return Gt[ve]=H}),c(u,Object.assign({},C,{},Gt))};return Object.assign(function(A,H){if(A===void 0&&(A=u),C.hasOwnProperty(H.type)){var ye=C[H.type];if(typeof ye!="function")throw Error('Reducer under "'+H.type+'" key is not a valid reducer');return ye(A,H)}return A},{handlers:Object.assign({},C),handleAction:S,handleType:S})},t.deprecated=x,t.getType=w,t.isActionOf=function(c,u){e(c)&&r(1);var m=Array.isArray(c)?c:[c];m.forEach(i);var C=function(S){return m.some(function(A){return S.type===A.getType()})};return u===void 0?C:C(u)},t.isOfType=function(c,u){e(c)&&r(1);var m=Array.isArray(c)?c:[c];m.forEach(p);var C=function(S){return m.includes(S.type)};return u===void 0?C:C(u)}})});var ks={};si(ks,{default:()=>Ts});module.exports=li(ks);var k=y(require("react"));var J=y(require("react"));var f=[];Object.freeze(f);var ci={id:"https://iiif-parser/annotation-page",type:"AnnotationPage",behavior:f,motivation:null,label:null,thumbnail:f,summary:null,requiredStatement:null,metadata:f,rights:null,provider:f,items:f,seeAlso:f,homepage:f,logo:f,rendering:f,service:f},ui={id:"https://iiif-parser/empty-canvas",type:"Canvas",label:null,behavior:f,motivation:null,thumbnail:f,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:f,rights:null,navDate:null,provider:f,items:f,annotations:f,seeAlso:f,homepage:f,logo:f,partOf:f,rendering:f,service:f,duration:0,height:0,width:0},di={id:"https://iiif-parser/empty-collection",type:"Collection",label:null,viewingDirection:"left-to-right",behavior:f,motivation:null,thumbnail:f,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:f,rights:null,navDate:null,provider:f,items:f,annotations:f,seeAlso:f,homepage:f,logo:f,partOf:f,rendering:f,service:f,services:f},pi={id:"https://iiif-parser/empty-manifest",type:"Manifest",annotations:f,behavior:f,homepage:f,items:f,label:null,logo:f,metadata:f,motivation:null,navDate:null,provider:f,partOf:f,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,rendering:f,requiredStatement:null,rights:null,seeAlso:f,service:f,services:f,start:null,structures:f,summary:null,thumbnail:f,viewingDirection:"left-to-right"},fi={id:"https://iiif-parser/empty-canvas",type:"Range",label:null,behavior:f,motivation:null,thumbnail:f,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:f,rights:null,navDate:null,provider:f,items:f,annotations:f,seeAlso:f,homepage:f,logo:f,partOf:f,rendering:f,service:f,start:null,supplementary:null,viewingDirection:"left-to-right"},mi={id:"https://iiif-parser/empty-agent",type:"Agent",label:{},logo:f,seeAlso:f,homepage:f};function st(t){return Array.isArray(t)?t:[t]}var Yt=["Collection","Manifest","Canvas","AnnotationPage","AnnotationCollection","Annotation","ContentResource","Range","Service","Selector","Agent"];function hi(t){if(typeof t=="undefined"||t===null)throw new Error("Null or undefined is not a valid entity.");if(Array.isArray(t))throw new Error("Array is not a valid entity");if(typeof t!="object")throw new Error(`${typeof t} is not a valid entity`);if(typeof t.type=="string"){let e=Yt.indexOf(t.type);if(e!==-1)return Yt[e]}if(t.profile)return"Service";throw new Error("Resource type is not known")}var Re=class{constructor(e,r={}){V(this,"traversals");V(this,"options");this.traversals={collection:[],manifest:[],canvas:[],annotationCollection:[],annotationPage:[],annotation:[],contentResource:[],choice:[],range:[],service:[],agent:[],...e},this.options={allowUndefinedReturn:!1,...r}}static all(e){return new Re({collection:[e],manifest:[e],canvas:[e],annotationCollection:[e],annotationPage:[e],annotation:[e],contentResource:[e],choice:[e],range:[e],service:[e]})}traverseDescriptive(e){return e.thumbnail&&(e.thumbnail=e.thumbnail.map(r=>this.traverseType(r,this.traversals.contentResource))),e.provider&&(e.provider=e.provider.map(r=>this.traverseAgent(r))),e}traverseLinking(e){return e.seeAlso&&(e.seeAlso=e.seeAlso.map(r=>this.traverseType(r,this.traversals.contentResource))),e.service&&(e.service=st(e.service).map(r=>this.traverseType(r,this.traversals.service))),e.services&&(e.services=e.services.map(r=>this.traverseType(r,this.traversals.service))),e.logo&&(e.logo=e.logo.map(r=>this.traverseType(r,this.traversals.contentResource))),e.homepage&&(e.homepage=e.homepage.map(r=>this.traverseType(r,this.traversals.contentResource))),e.partOf&&(e.partOf=e.partOf.map(r=>typeof r=="string"||!r.type?this.traverseType(r,this.traversals.contentResource):r.type==="Canvas"?this.traverseType(r,this.traversals.canvas):r.type==="AnnotationCollection"?this.traverseType(r,this.traversals.annotationCollection):this.traverseType(r,this.traversals.contentResource))),e.start&&(e.start=e.start?this.traverseType(e.start,this.traversals.canvas):null),e.rendering&&(e.rendering=e.rendering.map(r=>this.traverseType(r,this.traversals.contentResource))),e.supplementary&&(e.supplementary=e.supplementary.map(r=>this.traverseType(r,this.traversals.contentResource))),e}traverseCollectionItems(e){return e.items&&e.items.map(r=>r.type==="Collection"?this.traverseCollection(r):this.traverseManifest(r)),e}traverseCollection(e){return this.traverseType(this.traverseDescriptive(this.traverseInlineAnnotationPages(this.traverseLinking(this.traversePosterCanvas(this.traverseCollectionItems(e))))),this.traversals.collection)}traverseManifestItems(e){return e.items&&(e.items=e.items.map(r=>this.traverseCanvas(r))),e}traverseManifestStructures(e){return e.structures&&(e.structures=e.structures.map(r=>this.traverseRange(r))),e}traverseManifest(e){return this.traverseType(this.traverseInlineAnnotationPages(this.traverseManifestStructures(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(e)))))),this.traversals.manifest)}traverseCanvasItems(e){return e.items=(e.items||[]).map(r=>this.traverseAnnotationPage(r)),e}traverseInlineAnnotationPages(e){return typeof e=="string"||!e||e.annotations&&(e.annotations=e.annotations.map(r=>this.traverseAnnotationPage(r))),e}traverseCanvas(e){return this.traverseType(this.traverseInlineAnnotationPages(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(e))))),this.traversals.canvas)}traverseAnnotationPageItems(e){return e.items&&(e.items=e.items.map(r=>this.traverseAnnotation(r))),e}traverseAnnotationPage(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationPageItems(e))),this.traversals.annotationPage)}traverseAnnotationBody(e){return Array.isArray(e.body)?e.body=e.body.map(r=>this.traverseContentResource(r)):e.body&&(e.body=this.traverseContentResource(e.body)),e}traversePosterCanvas(e){return e.posterCanvas&&(e.posterCanvas=this.traverseCanvas(e.posterCanvas)),e.placeholderCanvas&&(e.placeholderCanvas=this.traverseCanvas(e.placeholderCanvas)),e.accompanyingCanvas&&(e.accompanyingCanvas=this.traverseCanvas(e.accompanyingCanvas)),e}traverseAnnotation(e){return this.traverseType(this.traverseLinking(this.traverseAnnotationBody(e)),this.traversals.annotation)}traverseContentResourceLinking(e){return typeof e=="string"||!e||e&&e.service&&(e.service=st(e.service||[]).map(r=>this.traverseType(r,this.traversals.service))),e}traverseContentResource(e){return e.type==="Choice"&&(e.items=e.items.map(r=>this.traverseContentResource(r))),this.traverseType(this.traverseInlineAnnotationPages(this.traverseContentResourceLinking(e)),this.traversals.contentResource)}traverseRangeRanges(e){return e.items&&(e.items=e.items.map(r=>typeof r=="string"?this.traverseCanvas({id:r,type:"Canvas"}):r.type==="Manifest"?this.traverseManifest(r):this.traverseRange(r))),e}traverseRange(e){return this.traverseType(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseRangeRanges(e)))),this.traversals.range)}traverseAgent(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(e)),this.traversals.agent)}traverseType(e,r){return r.reduce((n,o)=>{let i=o(n);return typeof i=="undefined"&&!this.options.allowUndefinedReturn?n:i},e)}traverseService(e){return this.traverseType(e,this.traversals.service)}traverseUnknown(e){let r=hi(e);switch(r){case"Collection":return this.traverseCollection(e);case"Manifest":return this.traverseManifest(e);case"Canvas":return this.traverseCanvas(e);case"AnnotationPage":return this.traverseAnnotationPage(e);case"Annotation":return this.traverseAnnotation(e);case"ContentResource":return this.traverseContentResource(e);case"Range":return this.traverseRange(e);case"Service":return this.traverseService(e);case"Agent":return this.traverseAgent(e);default:throw new Error(`Unknown or unsupported resource type of ${r}`)}}},Kt=["sc:Collection","sc:Manifest","sc:Canvas","sc:AnnotationList","oa:Annotation","sc:Range","sc:Layer","sc:Sequence","oa:Choice","Service","ContentResource"];function gi(t){if(typeof t=="undefined"||t===null)throw new Error("Null or undefined is not a valid entity.");if(Array.isArray(t))throw new Error("Array is not a valid entity");if(typeof t!="object")throw new Error(`${typeof t} is not a valid entity`);if(typeof t["@type"]=="string"){let e=Kt.indexOf(t["@type"]);if(e!==-1)return Kt[e]}if(t.profile)return"Service";if(t.format||t["@type"])return"ContentResource";throw new Error("Resource type is not known")}var Ne=class{constructor(e,r={}){V(this,"traversals");V(this,"options");this.traversals={collection:[],manifest:[],canvas:[],annotationList:[],sequence:[],annotation:[],contentResource:[],choice:[],range:[],service:[],layer:[],...e},this.options={convertPropsToArray:!0,mergeMemberProperties:!0,allowUndefinedReturn:!1,...r}}static all(e){return new Ne({collection:[e],manifest:[e],canvas:[e],annotationList:[e],sequence:[e],annotation:[e],contentResource:[e],choice:[e],range:[e],service:[e],layer:[e]})}traverseCollection(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCollectionItems(e))),this.traversals.collection)}traverseCollectionItems(e){if(this.options.mergeMemberProperties){let r=[...(e.manifests||[]).map(n=>typeof n=="string"?{"@id":n,"@type":"sc:Manifest"}:n),...(e.collections||[]).map(n=>typeof n=="string"?{"@id":n,"@type":"sc:Collection"}:n),...e.members||[]];delete e.collections,delete e.manifests,e.members=r}return e.manifests&&(e.manifests=e.manifests.map(r=>this.traverseManifest(typeof r=="string"?{"@id":r,"@type":"sc:Manifest"}:r))),e.collections&&(e.collections=e.collections.map(r=>this.traverseCollection(typeof r=="string"?{"@id":r,"@type":"sc:Collection"}:r))),e.members&&(e.members=e.members.map(r=>typeof r=="string"?r:this.traverseUnknown(r))),e}traverseManifest(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(e))),this.traversals.manifest)}traverseManifestItems(e){return e.sequences&&(e.sequences=e.sequences.map(r=>this.traverseSequence(r))),e.structures&&(e.structures=e.structures.map(r=>this.traverseRange(r))),e}traverseSequence(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseSequenceItems(e))),this.traversals.sequence)}traverseSequenceItems(e){return e.canvases&&(e.canvases=e.canvases.map(r=>this.traverseCanvas(r))),e}traverseCanvas(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(e))),this.traversals.canvas)}traverseCanvasItems(e){return e.images&&(e.images=e.images.map(r=>this.traverseAnnotation(r))),e.otherContent&&(e.otherContent=e.otherContent.map(r=>this.traverseAnnotationList(r))),e}traverseRange(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseRangeItems(e))),this.traversals.range)}traverseRangeItems(e){if(this.options.mergeMemberProperties){let r=[...(e.ranges||[]).map(n=>typeof n=="string"?{"@id":n,"@type":"sc:Range"}:n),...(e.canvases||[]).map(n=>typeof n=="string"?{"@id":n,"@type":"sc:Canvas"}:n),...e.members||[]];delete e.ranges,delete e.canvases,e.members=r.length?r.map(n=>this.traverseUnknown(n)):void 0}return e}traverseAnnotationList(e){let r=typeof e=="string"?{"@id":e,"@type":"sc:AnnotationList"}:e;return this.traverseType(this.traverseDescriptive(this.traverseAnnotationListItems(r)),this.traversals.annotationList)}traverseAnnotationListItems(e){return e.resources&&(e.resources=e.resources.map(r=>this.traverseAnnotation(r))),e}traverseAnnotation(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationItems(e))),this.traversals.annotation)}traverseAnnotationItems(e){return e.resource&&(e.resource=this.traverseContentResource(e.resource)),e.on,e}traverseLayer(e){return this.traverseType(this.traverseLinking(this.traverseLayerItems(e)),this.traversals.layer)}traverseLayerItems(e){return e.otherContent&&(e.otherContent=e.otherContent.map(r=>this.traverseAnnotationList(r))),e}traverseChoice(e){return this.traverseType(this.traverseChoiceItems(e),this.traversals.choice)}traverseChoiceItems(e){return e.default&&e.default!=="rdf:nil"&&(e.default=this.traverseContentResource(e.default)),e.item&&e.item!=="rdf:nil"&&(e.item=e.item.map(r=>this.traverseContentResource(r))),e}traverseService(e){return this.traverseType(this.traverseLinking(e),this.traversals.service)}traverseContentResource(e){return e["@type"]==="oa:Choice"?this.traverseChoice(e):this.traverseType(this.traverseDescriptive(this.traverseLinking(e)),this.traversals.contentResource)}traverseUnknown(e){if(!e["@type"]||typeof e=="string")return e;switch(gi(e)){case"sc:Collection":return this.traverseCollection(e);case"sc:Manifest":return this.traverseManifest(e);case"sc:Canvas":return this.traverseCanvas(e);case"sc:Sequence":return this.traverseSequence(e);case"sc:Range":return this.traverseRange(e);case"oa:Annotation":return this.traverseAnnotation(e);case"sc:AnnotationList":return this.traverseAnnotationList(e);case"sc:Layer":return this.traverseLayer(e);case"Service":return this.traverseService(e);case"oa:Choice":return this.traverseChoice(e);case"ContentResource":return this.traverseContentResource(e)}return e.profile?this.traverseService(e):e}traverseImageResource(e){let r=Array.isArray(e),n=Array.isArray(e)?e:[e],o=[];for(let i of n)typeof i=="string"?o.push(this.traverseContentResource({"@id":i,"@type":"dctypes:Image"})):o.push(this.traverseContentResource(i));return!r&&!this.options.convertPropsToArray?o[0]:o}traverseDescriptive(e){return e.thumbnail&&(e.thumbnail=this.traverseImageResource(e.thumbnail)),e.logo&&(e.logo=this.traverseImageResource(e.logo)),e}traverseOneOrMoreServices(e){let r=Array.isArray(e),n=Array.isArray(e)?e:[e],o=[];for(let i of n)o.push(this.traverseService(i));return!r&&!this.options.convertPropsToArray?o[0]:o}traverseLinking(e){return e.related&&(e.related=this.traverseOneOrManyType(e.related,this.traversals.contentResource)),e.rendering&&(e.rendering=this.traverseOneOrManyType(e.rendering,this.traversals.contentResource)),e.service&&(e.service=this.traverseOneOrMoreServices(e.service)),e.seeAlso&&(e.seeAlso=this.traverseOneOrManyType(e.seeAlso,this.traversals.contentResource)),e.within&&(typeof e.within=="string"||(e.within=this.traverseOneOrManyType(e.within,this.traversals.contentResource))),e.startCanvas&&(typeof e.startCanvas=="string"?e.startCanvas=this.traverseType({"@id":e.startCanvas,"@type":"sc:Canvas"},this.traversals.canvas):e.startCanvas&&this.traverseType(e.startCanvas,this.traversals.canvas)),e.contentLayer&&(typeof e.contentLayer=="string"?e.contentLayer=this.traverseLayer({"@id":e.contentLayer,"@type":"sc:Layer"}):e.contentLayer=this.traverseLayer(e.contentLayer)),e}traverseOneOrManyType(e,r){if(!Array.isArray(e))if(this.options.convertPropsToArray)e=[e];else return this.traverseType(e,r);return e.map(n=>this.traverseType(n,r))}traverseType(e,r){return r.reduce((n,o)=>{let i=o(n);return typeof i=="undefined"&&!this.options.allowUndefinedReturn?n:i},e)}},yi="http://library.stanford.edu/iiif/image-api/compliance.html#level0",Jt="http://library.stanford.edu/iiif/image-api/compliance.html#level1",er="http://library.stanford.edu/iiif/image-api/compliance.html#level2",vi="http://library.stanford.edu/iiif/image-api/conformance.html#level0",tr="http://library.stanford.edu/iiif/image-api/conformance.html#level1",rr="http://library.stanford.edu/iiif/image-api/conformance.html#level2",bi="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",nr="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",or="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",Ci="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",ir="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",ar="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",xi="http://iiif.io/api/image/1/level0.json",wi="http://iiif.io/api/image/1/profiles/level0.json",sr="http://iiif.io/api/image/1/level1.json",lr="http://iiif.io/api/image/1/profiles/level1.json",cr="http://iiif.io/api/image/1/level2.json",ur="http://iiif.io/api/image/1/profiles/level2.json",Ii="http://iiif.io/api/image/2/level0.json",Si="http://iiif.io/api/image/2/profiles/level0.json",dr="http://iiif.io/api/image/2/level1.json",pr="http://iiif.io/api/image/2/profiles/level1.json",fr="http://iiif.io/api/image/2/level2.json",mr="http://iiif.io/api/image/2/profiles/level2.json",Ai="level0",hr="level1",gr="level2",Ei="http://iiif.io/api/image/2/level0",yr="http://iiif.io/api/image/2/level1",vr="http://iiif.io/api/image/2/level2",Ti=[yr,vr,Jt,er,tr,rr,nr,or,ir,ar,sr,lr,cr,ur,dr,pr,fr,mr,hr,gr],ki=[Ei,yr,vr,yi,Jt,er,vi,tr,rr,bi,nr,or,Ci,ir,ar,xi,wi,sr,lr,cr,ur,Ii,Si,dr,pr,fr,mr,Ai,hr,gr],lt={attributionLabel:"Attribution",lang:"none",providerId:"http://example.org/provider",providerName:"Unknown"};function ue(t,e="none"){if(!t)return{};let r=Array.isArray(t)?t:[t],n={};for(let o of r){if(typeof o=="string"){n[e]=n[e]?n[e]:[],n[e].push(o||"");continue}if(!o["@language"]){n[e]=n[e]?n[e]:[],n[e].push(o["@value"]||"");continue}let i=o["@language"];n[i]=n[i]?n[i]:[],n[i].push(o["@value"]||"")}return n}function br(t){if(Array.isArray(t))return br(t.find(e=>typeof e=="string"));if(ki.indexOf(t)!==-1)return"level2";if(Ti.indexOf(t)!==-1)return"level1";if(typeof t=="string")return t}function Pi(t){let e=Array.isArray(t)?t:[t];for(let r of e)switch(r){case"http://iiif.io/api/image/2/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2":return"ImageService2";case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":return"ImageService1";case"http://iiif.io/api/annex/openannotation/context.json":return"ImageApiSelector"}}function Mi(t){switch(t){case"http://iiif.io/api/image/2/level0.json":case"http://iiif.io/api/image/2/level1.json":case"http://iiif.io/api/image/2/level2.json":return"ImageService2";case"http://iiif.io/api/auth/1/kiosk":case"http://iiif.io/api/auth/1/login":case"http://iiif.io/api/auth/1/clickthrough":case"http://iiif.io/api/auth/1/external":case"http://iiif.io/api/auth/0/kiosk":case"http://iiif.io/api/auth/0/login":case"http://iiif.io/api/auth/0/clickthrough":case"http://iiif.io/api/auth/0/external":return"AuthCookieService1";case"http://iiif.io/api/auth/1/token":case"http://iiif.io/api/auth/0/token":return"AuthTokenService1";case"http://iiif.io/api/auth/1/logout":case"http://iiif.io/api/auth/0/logout":return"AuthLogoutService1";case"http://iiif.io/api/search/1/search":case"http://iiif.io/api/search/0/search":return"SearchService1";case"http://iiif.io/api/search/1/autocomplete":case"http://iiif.io/api/search/0/autocomplete":return"AutoCompleteService1"}}function Oi(t){for(let e of["sc","oa","dcterms","dctypes","iiif"])if(t.startsWith(`${e}:`))return t.slice(e.length+1);return t}var Ri=["Collection","Manifest","Annotation","AnnotationPage","Range","Service"];function ut(t){let e=t["@id"]||t.id,r=t["@type"]||t.type,n=t.profile||void 0,o=t["@context"]||void 0;if(n){let i=Mi(n);if(i)return i}if(o){let i=Pi(o);if(i)return i}if(r){if(Array.isArray(r)){if(r.indexOf("oa:CssStylesheet")!==-1)return"CssStylesheet";if(r.indexOf("cnt:ContentAsText")!==-1)return"TextualBody";r=r[0]}for(let i of["sc","oa","dcterms","dctypes","iiif"])if(r.startsWith(`${i}:`)){r=r.slice(i.length+1);break}switch(r){case"Layer":return"AnnotationCollection";case"AnnotationList":return"AnnotationPage";case"cnt:ContentAsText":return"TextualBody"}}if(r&&Ri.indexOf(r)!==-1)return r;if(t.format){if(t.format.startsWith("image/"))return"Image";if(t.format.startsWith("text/")||t.format==="application/pdf")return"Text";if(t.format.startsWith("application/"))return"Dataset"}return e&&(e.endsWith(".jpg")||e.endsWith(".png")||e.endsWith(".jpeg"))?"Image":r||"unknown"}var Ni=/http(s)?:\/\/(creativecommons.org|rightsstatements.org)[^"'\\<\n]+/gm;function Li(t){let e=t.match(Ni);return e?e[0]:t}function Fi(t,e="Rights/License",r="none"){let n=null,o=[],i=Array.isArray(t)?t:[t];for(let a of i){let s=a?Li(a):void 0;if(s&&(s.indexOf("creativecommons.org")!==-1||s.indexOf("rightsstatements.org")!==-1)){s.startsWith("https://")?n=`http://${s.slice(8)}`:n=s;continue}s&&o.push({label:{[r]:[e]},value:{[r]:[s]}})}return[n,o]}var Di=["http://iiif.io/api/presentation/2/context.json","http://iiif.io/api/image/2/context.json","http://iiif.io/api/image/1/context.json","http://library.stanford.edu/iiif/image-api/1.1/context.json","http://iiif.io/api/search/1/context.json","http://iiif.io/api/search/0/context.json","http://iiif.io/api/auth/1/context.json","http://iiif.io/api/auth/0/context.json","http://iiif.io/api/annex/openannotation/context.json"];function $i(t){if(t){let e=Array.isArray(t)?t:[t],r=[];for(let n of e)n==="http://iiif.io/api/presentation/2/context.json"&&r.push("http://iiif.io/api/presentation/3/context.json"),Di.indexOf(n)===-1&&r.push(n);if(e.length)return r.length===1?r[0]:r}}function Vi(t){return t?t.map(e=>({label:ue(e.label),value:ue(e.value)})):[]}function G(t){for(let e in t)(typeof t[e]=="undefined"||t[e]===null)&&delete t[e];return t}var Zt=0;function Cr(t,e){let r=encodeURI(t.id||t["@id"]||"").trim();return r&&e?`${r}/${e}`:r||(Zt++,`http://example.org/${t["@type"]}${e?`/${e}`:""}/${Zt}`)}function Q(t){let e=[...t.behavior||[]];return t.viewingHint&&e.push(t.viewingHint),{"@context":t["@context"]?$i(t["@context"]):void 0,id:(t["@id"]||Cr(t)).trim(),type:ut(t),behavior:e.length?e:void 0,height:t.height?t.height:void 0,width:t.width?t.width:void 0,motivation:t.motivation?Oi(t.motivation):void 0,viewingDirection:t.viewingDirection,profile:t.profile,format:t.format?t.format:void 0,duration:void 0,timeMode:void 0}}function Y(t){let[e,r]=Fi(t.license),n=[...t.metadata?Vi(t.metadata):[],...r];return{rights:e,metadata:n.length?n:void 0,label:t.label?ue(t.label):void 0,requiredStatement:t.attribution?{label:ue(lt.attributionLabel),value:ue(t.attribution)}:void 0,navDate:t.navDate,summary:t.description?ue(t.description):void 0,thumbnail:t.thumbnail}}function Wi(t){if(!t.within)return;let e=Array.isArray(t.within)?t.within:[t.within],r=[];for(let n of e)if(typeof n=="string"){if(n)switch(t["@type"]){case"sc:Manifest":r.push({id:n,type:"Collection"});break}}else n["@id"]&&r.push({id:n["@id"],type:ut(n)});return r.length?r:void 0}function X(t){let e=t.related?Array.isArray(t.related)?t.related:[t.related]:[],r=t.contentLayer;return{provider:t.logo||e.length?[{id:lt.providerId,type:"Agent",homepage:e.length?[e[0]]:void 0,logo:t.logo?Array.isArray(t.logo)?t.logo:[t.logo]:void 0,label:ue(lt.providerName)}]:void 0,partOf:Wi(t),rendering:t.rendering,seeAlso:t.seeAlso,start:t.startCanvas,service:t.service?st(t.service):void 0,supplementary:r?[r]:void 0}}function ji(t){return G({...Q(t),...Y(t),...X(t),items:t.members})}function zi(t){let e=[],r=[];for(let o of t.sequences||[])o.canvases.length&&e.push(...o.canvases),o.behavior&&r.push(...o.behavior);let n=Q(t);return r.length&&(n.behavior?n.behavior.push(...r):n.behavior=r),G({...n,...Y(t),...X(t),items:e,structures:t.structures})}function _i(t){return G({...Q(t),...Y(t),...X(t),annotations:t.otherContent&&t.otherContent.length?t.otherContent:void 0,items:t.images&&t.images.length?[{id:Cr(t,"annotation-page"),type:"AnnotationPage",items:t.images}]:void 0})}function Bi(t){return G({...Q(t),...Y(t),...X(t),items:t.resources&&t.resources.length?t.resources:void 0})}function Ui(t){return!t.canvases||t.canvases.length===0?{canvases:[],behavior:[]}:{canvases:t.canvases,behavior:t.viewingHint?[t.viewingHint]:[]}}function qi(t){return G({...Q(t),...Y(t),...X(t),target:typeof t.on=="string"?encodeURI(t.on).trim():t.on,body:t.resource})}function Hi(t){let e=t;return G({...Q(e),...Y(e),...X(e)})}function Gi(t){let e=[];return t.default&&t.default!=="rdf:nil"&&e.push(t.default),t.item&&t.item!=="rdf:nil"&&e.push(...t.item),{...Q(t),...Y(t),items:e}}function Qi(t){return G({...Q(t),...Y(t),...X(t),items:t.members})}function Yi(t){let{"@id":e,"@type":r,"@context":n,profile:o,...i}=t,a={};return e&&(a["@id"]=e),a["@type"]=ut(t),a["@type"]==="unknown"&&(n&&n.length&&(a["@context"]=n),a["@type"]="Service"),o&&(a.profile=br(o)),G({...a,...i})}function Ki(t){return G({...Q(t),...Y(t),...X(t)})}var Zi=new Ne({collection:[ji],manifest:[zi],canvas:[_i],annotationList:[Bi],sequence:[Ui],annotation:[qi],contentResource:[Hi],choice:[Gi],range:[Qi],service:[Yi],layer:[Ki]});function Xi(t){return t&&t["@context"]&&(t["@context"]==="http://iiif.io/api/presentation/2/context.json"||t["@context"].indexOf("http://iiif.io/api/presentation/2/context.json")!==-1||t["@context"]==="http://www.shared-canvas.org/ns/context.json")||t["@context"]==="http://iiif.io/api/image/2/context.json"?Zi.traverseUnknown(t):t}function Ji(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}function xr(t,e){if(typeof t=="string")return{id:t,type:e};if(!t.id)throw new Error(`Invalid resource does not have an ID (${e})`);return t}function ea(t){return(e,r)=>{let n=t[e]?t[e]:{};return o=>{let i=xr(o,r||e);return i&&i.id&&e?(n[i.id]=n[i.id]?ta(n[i.id],i):Object.assign({},i),{id:i.id,type:e==="ContentResource"?e:i.type}):i}}}function ct(t,e){if(!e)return t;if(Array.isArray(t)){if(!Array.isArray(e))throw new Error("Cannot merge array with non-array");let r=[...t];for(let n of e)if(n!=null)if(Array.isArray(n))r.push(n);else if(typeof n=="object"&&n.id&&n.type){let o=r.findIndex(i=>i.id===n.id&&i.type===n.type);o>=0&&(r[o]=ct(r[o],n))}else t.indexOf(n)===-1&&r.push(n);return r}else if(typeof t=="object"){if(Array.isArray(e)||typeof e!="object")throw new Error("Cannot merge object with non-object");let r={...t};for(let[n,o]of Object.entries(e)){let i=r[n];i===f||!i?r[n]=o:r[n]=ct(i,o)}return r}else if(t)return t;return e}function ta(t,e){if(typeof t=="string")return t;if(e.id!==t.id||e.type!==t.type)throw new Error("Can only merge entities with identical identifiers and type!");return ct({...t},e)}function ra(t){return(e,r)=>n=>{let{id:o,type:i}=xr(n,r||e);if(typeof o=="undefined")throw new Error("Found invalid entity without an ID.");return e==="ContentResource"?t[o]=e:t[o]=i,n}}function na(t){let e=JSON.stringify(t),r=5381,n=e.length;for(;n;)r=r*33^e.charCodeAt(--n);let o=(r>>>0).toString(16);return o.length%2?"0"+o:o}function at(t){return e=>typeof e=="string"?{id:e,type:t}:e.id?e.type?e:{type:t,...e}:{id:`vault://${na(e)}`,type:t,...e}}function be(t){return e=>({...t,...e})}function Ce(t){return Array.isArray(t)?t:[t]}function oa(t){return t.body&&(t.body=Ce(t.body)),t.seeAlso&&(t.seeAlso=Ce(t.seeAlso)),t.body&&(t.body=Ce(t.body)),t.audience&&(t.audience=Ce(t.audience)),t.accessibility&&(t.accessibility=Ce(t.accessibility)),t.motivation&&(t.motivation=Ce(t.motivation)),t}function wr(t){let e=Xi(t),r=Ji(),n={},o=ea(r),i=ra(n),a=new Re({collection:[be(di),i("Collection"),o("Collection")],manifest:[be(pi),i("Manifest"),o("Manifest")],canvas:[be(ui),i("Canvas"),o("Canvas")],annotationPage:[at("AnnotationPage"),be(ci),i("AnnotationPage"),o("AnnotationPage")],annotation:[at("Annotation"),oa,i("Annotation"),o("Annotation")],contentResource:[at("ContentResource"),i("ContentResource"),o("ContentResource")],range:[be(fi),i("Range","Canvas"),o("Range","Canvas")],agent:[be(mi),i("Agent"),o("Agent")]}).traverseUnknown(e);return{entities:r,resource:a,mapping:n}}var ce="__$UNSET$__",Ir="__$UNWRAP$__";function ia(t,e){let r=t.requests[e],n=t.mapping[e];if(!(!n||r&&r.resourceUri&&!t.entities[n][r.resourceUri]))return t.entities[n][r?r.resourceUri:e]}function aa(t){let e={};for(let[r,n]of t){if(r===Ir&&n!==ce)return n;n!==ce&&typeof n!="undefined"&&n!==null&&(e[r]=n)}return e}function Sr(t,e,r){if(!e.type||!e.id)throw new Error("Unknown entity");if(!r[e.type])throw new Error(`Serializer not found for ${e.type}`);function n(o){let i=r[o.type];if(!i)return ce;let a=ia(t,o.id)||(o.id&&o.type?o:null);if(!a)return ce;let s=i(a,t,{isTopLevel:e.id===o.id}),l=s.next();for(;!l.done;){let p=l.value,v=ce;if(p)if(Array.isArray(p)){let h=[];for(let b of p)h.push(n(b));v=h}else v=n(p);l=s.next(v)}return l.value===ce?ce:aa(l.value)}return n(e)}function xe(t){if(!t)return;let e=Object.keys(t);if(e.length!==0){if(e.length===1){let r=e[0];if(!r)return"";let n=(t[r]||[]).join("");return r==="@none"||r==="none"||r==="en"?n:{"@language":r,"@value":n}}return e.map(r=>({"@language":r,"@value":(t[r]||[]).join("")}))}}function Ar(t){return Array.isArray(t)?t.map(e=>Ar(e)):typeof t=="string"?t:t.type&&t.type==="Canvas"?t.id:t}function Z(t,e=!1){if(t)return t.length>1&&!e?t:t[0]||void 0}function sa(t){if(t){if(typeof t=="string")return{"@id":t};if("@id"in t){let e={...t};return delete e["@type"],e}return{"@context":"http://iiif.io/api/image/2/context.json","@id":t.id,profile:`http://iiif.io/api/image/2/profiles/${t.profile}.json`}}}function oe(t,e){return[["@id",t.id],["@type",e],["format",t.format],["height",t.height],["width",t.width],["viewingDirection",t.viewingDirection!=="left-to-right"?t.viewingDirection:void 0]]}function*ie(t){let e=t.provider?yield t.provider[0]:void 0;return[["label",xe(t.label)],["metadata",t.metadata&&t.metadata.length?t.metadata.map(r=>({label:xe(r.label)||"",value:xe(r.value)||""})):void 0],["description",xe(t.summary)],["thumbnail",Z(yield t.thumbnail)],["navDate",t.navDate],["logo",e?Z(e.logo):void 0],["homepage",e?e.homepage:void 0],["attribution",t.requiredStatement?xe(t.requiredStatement.value):void 0]]}function*Oe(t){return[["seeAlso",Z(yield t.seeAlso)],["service",Z((t.service||[]).map(sa))],["rendering",Z(yield t.rendering)],["startCanvas",t.start?t.start.id:void 0]]}var Er={Manifest:function*(t){return[...oe(t,"sc:Manifest"),...yield*ie(t),...yield*Oe(t),["sequences",[{"@id":`${t.id}/sequence0`,"@type":"sc:Sequence",canvases:yield t.items}]],["structures",yield t.structures]]},Canvas:function*(t){let e=(yield t.items)[0];return[...oe(t,"sc:Canvas"),...yield*ie(t),...yield*Oe(t),["images",e?[e.resources]:void 0],["annotations",t.annotations&&t.annotations.length?Z(yield t.annotations):void 0]]},AnnotationPage:function*(t){return[...oe(t,"sc:AnnotationList"),...yield*ie(t),["resources",t.items&&t.items.length?Z(yield t.items):void 0]]},Annotation:function*(t){return[["@id",t.id],["@type","oa:Annotation"],["motivation","sc:painting"],["on",Ar(t.target)],["resource",Z(yield t.body,!0)]]},ContentResource:function*(t){switch(t.type){case"Image":return[...oe(t,"dctypes:Image"),...yield*ie(t),...yield*Oe(t)];case"Text":case"Dataset":default:return[...oe(t,void 0),...yield*ie(t)]}},AnnotationCollection:function*(t){return[["@id",t.id],["@type","sc:Layer"],["label",xe(t.label)]]},Collection:function*(t){return[...oe(t,"sc:Collection"),...yield*ie(t),...yield*Oe(t),["members",yield*t.items]]},Range:function*(t){let e=[],r=[];if(t.items)for(let n of t.items){let o=yield n;e.push({"@id":n.id,"@type":n.type,label:o?o.label:void 0,within:t.id}),n.type==="Canvas"&&r.push(n.id)}return[...oe(t,"sc:Range"),...yield*ie(t),...yield*Oe(t),["canvases",r.length===e.length?r:void 0],["members",r.length!==e.length?e:void 0]]}};function ae(t){var e;return[["id",(e=t.id)!=null&&e.startsWith("vault://")?void 0:t.id],["type",t.type],["format",t.format],["profile",t.profile],["height",t.height],["width",t.width],["duration",t.duration||void 0],["viewingDirection",t.viewingDirection!=="left-to-right"?t.viewingDirection:void 0],["behavior",t.behavior&&t.behavior.length?t.behavior:void 0],["timeMode",t.timeMode],["motivation",Array.isArray(t.motivation)?t.motivation[0]:t.motivation]]}function P(t){if(!(!t||t.length===0))return t}function Tr(t){if(t&&t.type&&t.type==="ImageService2"){let{id:e,type:r,profile:n,...o}=t,i=typeof n=="string"?n:Array.isArray(n)?n.find(a=>typeof a=="string"):"";return{"@id":e,"@type":r,profile:i?i.startsWith("http")?i:`http://iiif.io/api/image/2/${i}.json`:"http://iiif.io/api/image/2/level0.json",...o}}return t}function Xt(t){if(!(!t||t.length===0))return t.map(Tr)}function*se(t){return[["label",t.label],["metadata",P(t.metadata)],["summary",t.summary],["requiredStatement",t.requiredStatement],["rights",t.rights],["navDate",t.navDate],["language",t.language],["thumbnail",P(yield t.thumbnail)],["placeholderCanvas",yield t.placeholderCanvas],["accompanyingCanvas",yield t.accompanyingCanvas],["provider",P(yield t.provider)]]}function*le(t){return[["seeAlso",P(yield t.seeAlso)],["service",Xt(t.service)],["services",Xt(t.services)],["rendering",P(yield t.rendering)],["supplementary",P(yield t.supplementary)],["homepage",P(yield t.homepage)],["logo",P(yield t.logo)],["partOf",P(yield t.partOf)],["start",t.start]]}var kr={Manifest:function*(t,e,{isTopLevel:r}){return r?[["@context","http://iiif.io/api/presentation/3/context.json"],...ae(t),...yield*se(t),...yield*le(t),["items",yield t.items],["structures",P(yield t.structures)],["annotations",P(yield t.annotations)]]:[...ae(t),...yield*se(t)]},Canvas:function*(t){return[...ae(t),...yield*se(t),...yield*le(t),["items",yield t.items],["annotations",P(yield t.annotations)]]},Agent:function*(t){return[["id",t.id],["type","Agent"],["label",t.label],...yield*le(t)]},AnnotationPage:function*(t){return[...Object.entries(t).map(([e,r])=>[e,Array.isArray(r)?P(r):r]).filter(([e,r])=>e!=="items"),...yield*le(t),["items",yield t.items]]},Service:function*(t){return[[Ir,Tr(t)]]},Annotation:function*(t){let e=Object.entries(t).map(([n,o])=>n==="motivation"?[n,Array.isArray(o)?o[0]:o]:[n,Array.isArray(o)?P(o):o]).filter(([n])=>n!=="body"),r=yield t.body;return[...e,["body",r.length===1?r[0]:r]]},ContentResource:function*(t){return[...ae(t),...yield*se(t),...yield*le(t),["annotations",P(yield t.annotations)],["items",P(yield t.items)]]},AnnotationCollection:function*(t){return[["id",t.id],["type","AnnotationCollection"],["label",t.label]]},Collection:function*(t,e,{isTopLevel:r}){return r?[["@context","http://iiif.io/api/presentation/3/context.json"],...ae(t),...yield*se(t),...yield*le(t),["items",P(yield t.items)]]:[...ae(t),...yield*se(t)]},Range:function*(t){let e=[];for(let r of t.items)r.type==="Range"?e.push(yield r):e.push(r);return[...ae(t),...yield*se(t),...yield*le(t),["items",e],["annotations",P(yield t.annotations)]]}};var M=y(Mr(),1);function dt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Or(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function _e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Or(Object(r),!0).forEach(function(n){dt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Or(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function F(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Rr=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),pt=function(){return Math.random().toString(36).substring(7).split("").join(".")},Be={INIT:"@@redux/INIT"+pt(),REPLACE:"@@redux/REPLACE"+pt(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+pt()}};function la(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function ft(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(F(0));if(typeof e=="function"&&typeof r=="undefined"&&(r=e,e=void 0),typeof r!="undefined"){if(typeof r!="function")throw new Error(F(1));return r(ft)(t,e)}if(typeof t!="function")throw new Error(F(2));var o=t,i=e,a=[],s=a,l=!1;function p(){s===a&&(s=a.slice())}function v(){if(l)throw new Error(F(3));return i}function h(x){if(typeof x!="function")throw new Error(F(4));if(l)throw new Error(F(5));var c=!0;return p(),s.push(x),function(){if(!!c){if(l)throw new Error(F(6));c=!1,p();var m=s.indexOf(x);s.splice(m,1),a=null}}}function b(x){if(!la(x))throw new Error(F(7));if(typeof x.type=="undefined")throw new Error(F(8));if(l)throw new Error(F(9));try{l=!0,i=o(i,x)}finally{l=!1}for(var c=a=s,u=0;u<c.length;u++){var m=c[u];m()}return x}function w(x){if(typeof x!="function")throw new Error(F(10));o=x,b({type:Be.REPLACE})}function g(){var x,c=h;return x={subscribe:function(m){if(typeof m!="object"||m===null)throw new Error(F(11));function C(){m.next&&m.next(v())}C();var S=c(C);return{unsubscribe:S}}},x[Rr]=function(){return this},x}return b({type:Be.INIT}),n={dispatch:b,subscribe:h,getState:v,replaceReducer:w},n[Rr]=g,n}function ca(t){Object.keys(t).forEach(function(e){var r=t[e],n=r(void 0,{type:Be.INIT});if(typeof n=="undefined")throw new Error(F(12));if(typeof r(void 0,{type:Be.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(F(13))})}function mt(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++){var o=e[n];typeof t[o]=="function"&&(r[o]=t[o])}var i=Object.keys(r),a,s;try{ca(r)}catch(l){s=l}return function(p,v){if(p===void 0&&(p={}),s)throw s;if(!1)var h;for(var b=!1,w={},g=0;g<i.length;g++){var x=i[g],c=r[x],u=p[x],m=c(u,v);if(typeof m=="undefined"){var C=v&&v.type;throw new Error(F(14))}w[x]=m,b=b||m!==u}return b=b||i.length!==Object.keys(p).length,b?w:p}}function Le(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(n){return n}:e.length===1?e[0]:e.reduce(function(n,o){return function(){return n(o.apply(void 0,arguments))}})}function ht(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(n){return function(){var o=n.apply(void 0,arguments),i=function(){throw new Error(F(15))},a={getState:o.getState,dispatch:function(){return i.apply(void 0,arguments)}},s=e.map(function(l){return l(a)});return i=Le.apply(void 0,s)(o.dispatch),_e(_e({},o),{},{dispatch:i})}}}var $r="@iiif/IMPORT_ENTITIES",Vr="@iiif/MODIFY_ENTITY_FIELD",Wr="@iiif/REORDER_ENTITY_FIELD",jr="@iiif/ADD_REFERENCE",zr="@iiif/REMOVE_REFERENCE",_r=(0,M.createAction)($r)(),ua=(0,M.createAction)(Vr)(),da=(0,M.createAction)(Wr)(),pa=(0,M.createAction)(jr)(),fa=(0,M.createAction)(zr)(),ma={importEntities:_r,modifyEntityField:ua,reorderEntityField:da,addReference:pa,removeReference:fa},Br="@iiif/ADD_MAPPING",Ur="@iiif/ADD_MAPPINGS",ha=(0,M.createAction)(Br)(),ga=(0,M.createAction)(Ur)(),qr="@iiif/SET_META_VALUE",Hr="@iiif/SET_META_VALUE_DYNAMIC",Gr="@iiif/UNSET_META_VALUE",ya=(0,M.createAction)(qr)(),va=(0,M.createAction)(Hr)(),ba=(0,M.createAction)(Gr)(),Nr={setMetaValue:ya,setMetaValueDynamic:va,unsetMetaValue:ba},vt="RESOURCE_ERROR",Qr="RESOURCE_LOADING",bt="RESOURCE_READY",Yr="@iiif/REQUEST_RESOURCE",Kr="@iiif/REQUEST_ERROR",Zr="@iiif/REQUEST_MISMATCH",Xr="@iiif/REQUEST_COMPLETE",Jr="@iiif/REQUEST_OFFLINE_RESOURCE",Ca=(0,M.createAction)(Yr)(),en=(0,M.createAction)(Kr)(),xa=(0,M.createAction)(Zr)(),wa=(0,M.createAction)(Xr)();(0,M.createAction)(Jr)();var xt="@iiif/BATCH",tn="@iiif/BATCH_IMPORT",Ct=(0,M.createAction)(xt)();(0,M.createAction)(tn)();var Ia=(t,e)=>{let{entities:r,resource:n,mapping:o}=wr(e);if(n.id===void 0)return[en({id:t,message:"ID is not defined in resource."})];let i=[_r({entities:r}),ga({mapping:o})];return n.id!==t&&(i.push(ha({id:t,type:n.type})),i.push(xa({requestId:t,actualId:n.id}))),i.push(wa({id:t})),i},Lr=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Sa(t,e){return!!(t===e||Lr(t)&&Lr(e))}function Fr(t,e){if(!Array.isArray(t)||!Array.isArray(e))return t===e;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!Sa(t[r],e[r]))return!1;return!0}function gt(t,e){let r=t.iiif.requests[e],n=t.iiif.mapping[e];if(!(!n||!t.iiif.entities[n][r.resourceUri]))return t.iiif.entities[n][r.resourceUri]}function Dr(t,e,{waitTimeout:r=30}={}){return async(n,o)=>{let i=t.getState(),a=i.iiif.requests[n];if(a)switch(a.loadingState){case vt:break;case Qr:{let s,l=!1;try{let p=await Promise.race([new Promise((v,h)=>{l||(s=t.subscribe(()=>{let b=t.getState();if(b.iiif.requests[n].loadingState===vt){h();return}if(b.iiif.requests[n].loadingState===bt){let w=gt(b,n);w?v(w):h()}}))}),new Promise((v,h)=>setTimeout(()=>{l=!0,h()},r*60))]);if(s&&s(),p)return p}catch{s&&s();break}break}case bt:{let s=gt(i,n);if(s)return s;break}}t.dispatch(Ca({id:n}));try{let s=await e(n,o);!s.id&&!s["@id"]&&(s["@type"]&&(s["@id"]=n),s.id=n);let l=Ia(n,s);return t.dispatch(Ct({actions:l})),gt(t.getState(),n)}catch(s){throw t.dispatch(en({id:n,message:s.toString()})),s}}}function Aa(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}var Ea=(t={},e)=>{switch(e.type){case Br:return{...t,[e.payload.id]:e.payload.type};case Ur:return{...t,...e.payload.mapping};default:return t}};function yt(t,e,r,n){return!(!t[r]||!t[r][e]||!t[r][e][n]||!Array.isArray(t[r][e][n]))}var Ta=(t=Aa(),e)=>{var r;switch(e.type){case Vr:{if(!t[e.payload.type]||!t[e.payload.type][e.payload.id])return t;let n=t[e.payload.type][e.payload.id];return typeof n=="string"?t:{...t,[e.payload.type]:{...t[e.payload.type],[e.payload.id]:{...n,[e.payload.key]:e.payload.value}}}}case Wr:{if(!yt(t,e.payload.id,e.payload.type,e.payload.key))return t;let n=t[e.payload.type][e.payload.id];if(typeof n=="string")return t;let o=Array.from(n[e.payload.key]),[i]=o.splice(e.payload.startIndex,1);return o.splice(e.payload.endIndex,0,i),{...t,[e.payload.type]:{...t[e.payload.type],[e.payload.id]:{...n,[e.payload.key]:o}}}}case $r:{let n=Object.keys(e.payload.entities),o={...t};for(let i of n)o[i]={...t[i]||{},...e.payload.entities[i]||{}};return o}case jr:{if(!yt(t,e.payload.id,e.payload.type,e.payload.key))return t;let n=t[e.payload.type][e.payload.id],o=Array.from(n[e.payload.key]);return o.splice(e.payload.index||o.length+1,0,e.payload.reference),{...t,[e.payload.type]:{...t[e.payload.type],[e.payload.id]:{...n,[e.payload.key]:o}}}}case zr:{if(!yt(t,e.payload.id,e.payload.type,e.payload.key))return t;let n=t[e.payload.type][e.payload.id],o=Array.from(n[e.payload.key]),i=e.payload.index||o.findIndex(a=>a&&a.id===e.payload.reference.id);return i===-1||((r=o[i])==null?void 0:r.id)!==e.payload.reference.id?t:(o.splice(i,1),{...t,[e.payload.type]:{...t[e.payload.type],[e.payload.id]:{...n,[e.payload.key]:o}}})}default:return t}},ka=(t={},e)=>{switch(e.type){case Yr:case Jr:return{...t,[e.payload.id]:{requestUri:e.payload.id,loadingState:Qr,uriMismatch:!1,resourceUri:e.payload.id}};case Zr:return{...t,[e.payload.requestId]:{...t[e.payload.requestId]||{},uriMismatch:!0,resourceUri:e.payload.actualId},[e.payload.actualId]:{requestUri:e.payload.requestId,loadingState:t[e.payload.requestId].loadingState,uriMismatch:!0,resourceUri:e.payload.actualId}};case Kr:return{...t,[e.payload.id]:{...t[e.payload.id]||{},loadingState:vt,error:e.payload.message}};case Xr:return{...t,[e.payload.id]:{...t[e.payload.id]||{},loadingState:bt,error:void 0}}}return t},Pa=(t={},e)=>{let{id:r,updateValue:n,value:o,meta:i,key:a}=e&&e.payload||{};switch(e.type){case qr:return{...t,[r]:{...t[r]||{},[i]:{...t[r]?t[r][i]||{}:{},[a]:o}}};case Hr:return{...t,[r]:{...t[r]||{},[i]:{...t[r]?t[r][i]||{}:{},[a]:t[r]&&t[r][i]?n(t[r][i][a]):n(void 0)}}};case Gr:return t[r]&&t[r][i]&&t[r][i][a]?{...t,[r]:{...t[r]||{},[i]:{...t[r]?t[r][i]||{}:{},[a]:void 0}}}:t;default:return t}};function Ma(t){return(e,r)=>r&&r.type===xt?r.payload.actions.reduce(t,e):r&&r.type===tn?r.payload.state:t(e,r)}var Oa=mt({mapping:Ea,entities:Ta,requests:ka,meta:Pa}),Ra=typeof window!="undefined"?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Le:Le;function Na(t={}){let{enableDevtools:e=!0,iiifStoreName:r="iiif",defaultState:n={},extraMiddleware:o=[],customReducers:i={}}=t,a=mt({[r]:Oa,...i});return ft(Ma(a),n,e?Ra(ht(...o)):Le(ht(...o)))}function La(t){return{all:t=t||new Map,on:function(e,r){var n=t.get(e);n?n.push(r):t.set(e,[r])},off:function(e,r){var n=t.get(e);n&&(r?n.splice(n.indexOf(r)>>>0,1):t.set(e,[]))},emit:function(e,r){var n=t.get(e);n&&n.slice().map(function(o){o(r)}),(n=t.get("*"))&&n.slice().map(function(o){o(e,r)})}}}var Ue=class{constructor(e,r){V(this,"options");V(this,"store");V(this,"emitter");V(this,"isBatching",!1);V(this,"batchQueue",[]);V(this,"remoteFetcher");V(this,"staticFetcher");V(this,"defaultFetcher",e=>fetch(e).then(r=>r.json()));V(this,"middleware",e=>r=>n=>{if(n.type===xt){for(let a of n.payload.actions)this.emitter.emit(a.type,{realAction:a,state:e.getState()});let i=r(n);for(let a of n.payload.actions)this.emitter.emit(`after:${n.type}`,{action:n,state:i});return i}this.emitter.emit(n.type,{action:n,state:e.getState()});let o=r(n);return this.emitter.emit(`after:${n.type}`,{action:n,state:o}),o});this.options=Object.assign({reducers:{},middleware:[],defaultState:{},customFetcher:this.defaultFetcher,enableDevtools:!0},e||{}),this.store=r||Na({customReducers:this.options.reducers,extraMiddleware:[...this.options.middleware,this.middleware],defaultState:this.options.defaultState,enableDevtools:this.options.enableDevtools}),this.emitter=La(),this.remoteFetcher=Dr(this.store,this.options.customFetcher),this.staticFetcher=Dr(this.store,(n,o)=>o)}batch(e){this.isBatching=!0;try{e(this),this.store.dispatch(Ct({actions:this.batchQueue}))}catch(r){throw this.batchQueue=[],this.isBatching=!1,r}this.batchQueue=[],this.isBatching=!1}async asyncBatch(e){this.isBatching=!0;try{await e(this),this.store.dispatch(Ct({actions:this.batchQueue}))}catch(r){throw this.batchQueue=[],this.isBatching=!1,r}this.batchQueue=[],this.isBatching=!1}modifyEntityField(e,r,n){this.dispatch(ma.modifyEntityField({id:e.id,type:e.type,key:r,value:n}))}dispatch(e){this.isBatching?this.batchQueue.push(e):this.store.dispatch(e)}serialize(e,r){return Sr(this.getState().iiif,e,r)}toPresentation2(e){return this.serialize(e,Er)}toPresentation3(e){return this.serialize(e,kr)}hydrate(e,r){return this.get(e,r,{skipSelfReturn:!1})}get(e,r,n={}){typeof r!="string"&&(n=r||{},r=void 0);let{skipSelfReturn:o=!0}=n||{};if(Array.isArray(e))return e.map(p=>this.get(p,n));let i=this.getState();if(typeof e=="string"){let p=r||i.iiif.mapping[e];if(!p)return o?null:{id:e,type:"unknown"};e={id:e,type:p}}let a=r||e.type,s=e.id,l=i.iiif.entities[a];if(!l){let p=i.iiif.requests[s];return p&&p.resourceUri!==s?this.get(p.resourceUri,n):o?null:e}return l[e.id]||(o?null:e)}select(e){return e(this.getState())}getStore(){return this.store}getState(){return this.store.getState()}loadManifest(e,r){let n=typeof e=="string"?e:e.id;return this.load(n,r)}loadCollection(e,r){let n=typeof e=="string"?e:e.id;return this.load(n,r)}load(e,r){let n=typeof e=="string"?e:e.id;return r?this.staticFetcher(n,r):this.remoteFetcher(n)}areInputsEqual(e,r){return Fr(e,r)}subscribe(e,r,n){typeof n=="undefined"&&(typeof r=="undefined"||r===!1||r===!0)&&(n=r,r=e,e=i=>i);let o=n?null:e(this.store.getState());return n||r(o,this),this.store.subscribe(()=>{let i=this.store.getState(),a=e(i);o!==a&&!Fr(o,a)&&r(a,this),o=a})}async ensureLoaded(e){let r=typeof e=="string"?e:e.id;this.requestStatus(r)||await this.load(r)}requestStatus(e){return this.select(r=>r.iiif.requests[e])}getResourceMeta(e,r){let n=this.getState().iiif.meta[e];if(!!n)return r?n[r]:n}setMetaValue([e,r,n],o){this.dispatch(typeof o=="function"?Nr.setMetaValueDynamic({id:e,meta:r,key:n,updateValue:o}):Nr.setMetaValue({id:e,meta:r,key:n,value:o}))}};var rn={canvasBackgroundColor:"#e6e8eb",canvasHeight:"61.8vh",ignoreCaptionLabels:[],renderAbout:!0,showIIIFBadge:!0,showInformationToggle:!0,showTitle:!0},wt={activeCanvas:"",activeManifest:"",collection:{},configOptions:rn,informationExpanded:!0,isLoaded:!1,vault:new Ue},nn=J.default.createContext(wt),on=J.default.createContext(wt);function Fa(t,e){switch(e.type){case"updateActiveCanvas":return e.canvasId||(e.canvasId=""),{...t,activeCanvas:e.canvasId};case"updateActiveManifest":return{...t,activeManifest:e.manifestId};case"updateCollection":return{...t,collection:e.collection};case"updateConfigOptions":return{...t,configOptions:{...rn,...e.configOptions}};case"updateInformationExpanded":return{...t,informationExpanded:e.informationExpanded};case"updateIsLoaded":return{...t,isLoaded:e.isLoaded};default:throw new Error(`Unhandled action type: ${e.type}`)}}var an=({initialState:t=wt,children:e})=>{let[r,n]=J.default.useReducer(Fa,t);return J.default.createElement(nn.Provider,{value:r},J.default.createElement(on.Provider,{value:n},e))};function O(){let t=J.default.useContext(nn);if(t===void 0)throw new Error("useViewerState must be used within a ViewerProvider");return t}function ee(){let t=J.default.useContext(on);if(t===void 0)throw new Error("useViewerDispatch must be used within a ViewerProvider");return t}var $=y(require("react"));function sn(t){return t.service?`${t.service[0].id}/full/,${t.height||500}/0/default.jpg`:t.id}var It=t=>{if(!!t)try{let e=t.thumbnail;return e&&e.length>0?sn(e[0]):sn(t.items[0].items[0].body)}catch(e){console.error("Error retrieving accompanying canvas image",e);return}};var de=(t,e,r,n)=>{var a,s;let o={canvas:void 0,accompanyingCanvas:void 0,annotationPage:void 0,annotations:[]},i=l=>{if(l){if(!l.body||!l.motivation){console.error("Invalid annotation after Hyperion parsing: missing either 'body' or 'motivation'",l);return}if(!l.body)return;let p=l.body;Array.isArray(p)&&(p=p[0]);let v=t.get(p.id);if(!v)return;switch(r){case"painting":return l.target===e.id&&l.motivation&&l.motivation[0]==="painting"&&n.includes(v.type)&&(l.body=v),l;case"supplementing":return;default:throw new Error("Invalid annotation motivation.")}}};return o.canvas=t.get(e),o.canvas&&(o.annotationPage=t.get(o.canvas.items[0]),o.accompanyingCanvas=(a=o.canvas)!=null&&a.accompanyingCanvas?t.get((s=o.canvas)==null?void 0:s.accompanyingCanvas):void 0),o.annotationPage&&(o.annotations=t.get(o.annotationPage.items).filter(i)),o};var K=(t,e="en")=>{if(!t)return"";if(!t[e]){let r=Object.getOwnPropertyNames(t);if(r.length>0)return t[r[0]]}return t[e]};var St=(t,e)=>{let r=de(t,{id:e,type:"Canvas"},"painting",["Image","Sound","Video"]);if(r.annotations.length!==0&&r.annotations[0]&&r.annotations[0].body)return r.annotations[0].body};var At=(t,e,r)=>{let n=t.get({id:e,type:"Canvas"});if(!(n!=null&&n.annotations)||!n.annotations[0])return[];let o=t.get(n.annotations[0]),i=t.get(o.items);return Array.isArray(i)?i.filter(a=>{var s;if(!!a.body&&(s=a.motivation)!=null&&s.includes("supplementing")){let l=a.body;Array.isArray(l)&&(l=l[0]);let p=t.get(l.id);if(p.format===r)return a.body=p,a}}).map(a=>a.body):[]};var Et=(t,e,r,n)=>{let o=[];if(e.canvas&&e.canvas.thumbnail.length>0){let s=t.get(e.canvas.thumbnail[0]);o.push(s)}if(e.annotations[0]){if(e.annotations[0].thumbnail&&e.annotations[0].thumbnail.length>0){let l=t.get(e.annotations[0].thumbnail[0]);o.push(l)}if(!e.annotations[0].body)return;let s=e.annotations[0].body;s.type==="Image"&&o.push(s)}return o.length===0?void 0:{id:o[0].id,format:o[0].format,type:o[0].type,width:r,height:n}};var ln=require("@stitches/react"),Da={colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:"#006adc",accentMuted:"#5eb0ef",accentAlt:"#00254d",secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fonts:{sans:"'Inter', Arial, sans-serif",display:"'Calistoga', 'Inter', Arial, sans-serif"},transitions:{all:"all 500ms cubic-bezier(0.16, 1, 0.3, 1)"}},Tt={xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",xl:"(max-width: 1199px)",lg:"(min-width: 1200px)"},{styled:d,css:tl,keyframes:cn,createTheme:rl}=(0,ln.createStitches)({theme:Da,media:Tt});var qe=y(require("@radix-ui/react-collapsible")),kt=d("div",{position:"relative",zIndex:"0"}),Pt=d("div",{display:"flex",flexDirection:"row",overflow:"hidden","@sm":{flexDirection:"column"}}),Mt=d("div",{display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"1",width:"61.8%","@sm":{width:"100%"}}),un=d(qe.Trigger,{display:"none",background:"transparent",border:"none",margin:"0",padding:"0",transition:"$all",opacity:"1",marginTop:"0","&[data-navigator='false']":{opacity:"0",marginTop:"-59px"},"@sm":{display:"flex","> span":{display:"flex",flexGrow:"1",margin:"1rem 1rem 0"}}}),Ot=d(qe.Content,{width:"100%",display:"flex"}),dn=d("aside",{display:"flex",flexGrow:"1",flexShrink:"0",width:"38.2%",maxHeight:"100%","@sm":{width:"100%"}}),pn=d("div",{display:"flex",flexDirection:"column",fontFamily:"$sans",backgroundColor:"$secondary",fontSmooth:"auto",webkitFontSmoothing:"antialiased","> div":{display:"flex",flexDirection:"column",flexGrow:"1",justifyContent:"flex-start","@sm":{[`& ${Pt}`]:{flexGrow:"1"},[`& ${Mt}`]:{flexGrow:"0"}}},"@sm":{padding:"0"},"&[data-navigator-open='true']":{"@sm":{position:"fixed",height:"100%",width:"100%",top:"0",left:"0",zIndex:"2500000000",[`& ${kt}`]:{display:"none"},[`& ${Ot}`]:{height:"100%"}}}});var He=require("react"),fn=t=>{let e=()=>window.matchMedia?window.matchMedia(t).matches:!1,[r,n]=(0,He.useState)(e);return(0,He.useEffect)(()=>{let o=()=>n(e);return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)}),r};var we=require("react"),mn=(t=!1)=>{let[e,r]=(0,we.useState)(t);return(0,we.useLayoutEffect)(()=>{if(!e)return;let n=document.documentElement.style.overflow;return document.documentElement.style.overflow="hidden",()=>{document.documentElement.style.overflow=n}},[e]),(0,we.useEffect)(()=>{e!==t&&r(t)},[t]),[e,r]};var Qo=y(require("@radix-ui/react-collapsible"));var D=y(require("react"));var Rt=require("@nulib/design-system");var te=y(require("@radix-ui/react-select"));var hn=d("svg",{height:"19px",color:"$accent",fill:"$accent",stroke:"$accent",display:"flex",margin:"0.25rem 0.85rem"}),gn=d(te.Trigger,{fontSize:"1.25rem",fontWeight:"400",fontFamily:"$display",alignSelf:"flex-start",flexGrow:"1",backgroundColor:"$secondary",cursor:"pointer",transition:"$all",border:"1px solid $secondaryMuted",boxShadow:"2px 2px 5px #0001",borderRadius:"3px",display:"flex",alignItems:"center",paddingLeft:"0.5rem","@sm":{fontSize:"1rem"}}),yn=d(te.Content,{borderRadius:"3px",boxShadow:"3px 3px 8px #0003",backgroundColor:"$secondary",marginTop:"2.25rem",marginLeft:"6px",paddingBottom:"0.25rem",maxHeight:"calc(61.8vh - 2.5rem) !important",borderTopLeftRadius:"0",border:"1px solid $secondaryMuted",maxWidth:"90vw"}),vn=d(te.Item,{display:"flex",alignItems:"center",fontFamily:"$sans",padding:"0.25rem 0.5rem",color:"$primary",fontWeight:"400",fontSize:"0.8333rem",cursor:"pointer",backgroundColor:"$secondary",width:"calc(100% - 1rem)","> span":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},'&[data-state="checked"]':{fontWeight:"700",color:"$primary !important"},"&:hover":{color:"$accent"},img:{width:"31px",height:"31px",marginRight:"0.5rem",borderRadius:"3px"}}),bn=d(te.Label,{color:"$primaryMuted",fontFamily:"$sans",fontSize:"0.85rem",padding:"0.5rem 1rem 0.5rem 0.5rem",display:"flex",alignItems:"center",marginBottom:"0.25rem",borderRadius:"3px",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",borderBottomRightRadius:"0",backgroundColor:"$secondaryMuted"}),Ge=d("div",{position:"relative",zIndex:"5"});var Cn=d(Rt.Popover.Trigger,{width:"30px",padding:"5px",margin:"0 0 0 2rem"}),xn=d(Rt.Popover.Content,{display:"flex",flexDirection:"column",fontSize:"0.8333rem",border:"none",boxShadow:"2px 2px 5px #0003",zIndex:"2",button:{display:"flex",textDecoration:"none",fontFamily:"$sans",marginBottom:"0.5em",color:"$accentAlt",cursor:"pointer",background:"$secondary",border:"none",["&:last-child"]:{marginBottom:"0"}}}),wn=d("span",{fontSize:"1.25rem",fontWeight:"700",fontFamily:"$display",alignSelf:"flex-start",flexGrow:"1",flexShrink:"0","@sm":{fontSize:"1rem"}}),In=d("header",{display:"flex",backgroundColor:"transparent !important",justifyContent:"flex-end",padding:"1rem",[`> ${Ge}`]:{flexGrow:"1",flexShrink:"0"},form:{flexGrow:"0",flexShrink:"1"}});var Nn=require("@nulib/design-system");var _=y(require("react")),$a=()=>{let t="#ed1d33",e="#2873ab";return _.default.createElement("svg",{viewBox:"0 0 493.35999 441.33334",id:"iiif-logo",version:"1.1"},_.default.createElement("title",null,"IIIF Manifest Options"),_.default.createElement("g",{transform:"matrix(1.3333333,0,0,-1.3333333,0,441.33333)"},_.default.createElement("g",{transform:"scale(0.1)"},_.default.createElement("path",{style:{fill:e},d:"M 65.2422,2178.75 775.242,1915 773.992,15 65.2422,276.25 v 1902.5"}),_.default.createElement("path",{style:{fill:e},d:"m 804.145,2640.09 c 81.441,-240.91 -26.473,-436.2 -241.04,-436.2 -214.558,0 -454.511,195.29 -535.9527,436.2 -81.4335,240.89 26.4805,436.18 241.0387,436.18 214.567,0 454.512,-195.29 535.954,-436.18"}),_.default.createElement("path",{style:{fill:t},d:"M 1678.58,2178.75 968.578,1915 969.828,15 1678.58,276.25 v 1902.5"}),_.default.createElement("path",{style:{fill:t},d:"m 935.082,2640.09 c -81.437,-240.91 26.477,-436.2 241.038,-436.2 214.56,0 454.51,195.29 535.96,436.2 81.43,240.89 -26.48,436.18 -241.04,436.18 -214.57,0 -454.52,-195.29 -535.958,-436.18"}),_.default.createElement("path",{style:{fill:e},d:"m 1860.24,2178.75 710,-263.75 -1.25,-1900 -708.75,261.25 v 1902.5"}),_.default.createElement("path",{style:{fill:e},d:"m 2603.74,2640.09 c 81.45,-240.91 -26.47,-436.2 -241.03,-436.2 -214.58,0 -454.52,195.29 -535.96,436.2 -81.44,240.89 26.48,436.18 241.03,436.18 214.57,0 454.51,-195.29 535.96,-436.18"}),_.default.createElement("path",{style:{fill:t},d:"m 3700.24,3310 v -652.5 c 0,0 -230,90 -257.5,-142.5 -2.5,-247.5 0,-336.25 0,-336.25 l 257.5,83.75 V 1690 l -258.61,-92.5 V 262.5 L 2735.24,0 v 2360 c 0,0 -15,850 965,950"}))))},Sn=$a;var Qe=y(require("react"));var Ie=require("react"),An=(t,e=2500)=>{let[r,n]=(0,Ie.useState)(),o=(0,Ie.useCallback)(()=>{navigator.clipboard.writeText(t).then(()=>n("copied"),()=>n("failed"))},[t]);return(0,Ie.useEffect)(()=>{if(!r)return;let i=setTimeout(()=>n(void 0),e);return()=>clearTimeout(i)},[r]),[r,o]};var Va=d("span",{display:"flex",alignContent:"center",alignItems:"center",padding:"0.125rem 0.25rem 0",marginTop:"-0.125rem",marginLeft:"0.5rem",backgroundColor:"$accent",color:"$secondary",borderRadius:"3px",fontSize:"0.6111rem",textTransform:"uppercase",lineHeight:"1em"}),Wa=({status:t})=>t?Qe.default.createElement(Va,{"data-copy-status":t},t):null,ja=({textPrompt:t,textToCopy:e})=>{let[r,n]=An(e);return Qe.default.createElement("button",{onClick:n},t," ",Qe.default.createElement(Wa,{status:r}))},Nt=ja;var R=y(require("@radix-ui/react-select"));var Fe=require("@samvera/nectar-iiif");var E=y(require("react"));var pe=y(require("react"));var za=({direction:t,title:e})=>pe.default.createElement(hn,{xmlns:"http://www.w3.org/2000/svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},pe.default.createElement("title",null,e),t==="up"&&pe.default.createElement(()=>pe.default.createElement("path",{d:"M414 321.94L274.22 158.82a24 24 0 00-36.44 0L98 321.94c-13.34 15.57-2.28 39.62 18.22 39.62h279.6c20.5 0 31.56-24.05 18.18-39.62z"}),null),t==="down"&&pe.default.createElement(()=>pe.default.createElement("path",{d:"M98 190.06l139.78 163.12a24 24 0 0036.44 0L414 190.06c13.34-15.57 2.28-39.62-18.22-39.62h-279.6c-20.5 0-31.56 24.05-18.18 39.62z"}),null)),Ye=za;var _a=()=>{let t=ee(),e=O(),{activeManifest:r,collection:n,configOptions:o,vault:i}=e,a=o==null?void 0:o.canvasHeight;return E.default.createElement(Ge,null,E.default.createElement(R.Root,{value:r,onValueChange:l=>{t({type:"updateActiveManifest",manifestId:l})}},E.default.createElement(gn,null,E.default.createElement(R.Value,null),E.default.createElement(R.Icon,null,E.default.createElement(Ye,{direction:"down",title:"select from collection"}))),E.default.createElement(yn,{css:{maxHeight:`${a} !important`}},E.default.createElement(R.ScrollUpButton,null,E.default.createElement(Ye,{direction:"up",title:"scroll up for more"})),E.default.createElement(R.Viewport,null,E.default.createElement(R.Group,null,E.default.createElement(bn,null,E.default.createElement(Fe.Label,{label:n.label})),n.items.map(l=>E.default.createElement(vn,{value:l.id,key:l.id},E.default.createElement(Fe.Thumbnail,{thumbnail:i.get(l.thumbnail)}),E.default.createElement(R.ItemText,null,E.default.createElement(Fe.Label,{label:l.label})),E.default.createElement(R.ItemIndicator,null))))),E.default.createElement(R.ScrollDownButton,null,E.default.createElement(Ye,{direction:"down",title:"scroll down for more"})))))},En=_a;var Ln=require("@samvera/nectar-iiif");var B=y(require("react"));var Ke=y(require("@radix-ui/react-switch")),Tn=d(Ke.Root,{all:"unset",height:"2rem",width:"3.236rem",backgroundColor:"$secondaryAlt",borderRadius:"9999px",position:"relative",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:focus":{boxShadow:"0 0 0 2px $secondaryAlt"},'&[data-state="checked"]':{backgroundColor:"$accent",boxShadow:"inset 2px 2px 5px #0003"}}),kn=d(Ke.Thumb,{display:"block",height:"calc(2rem - 12px)",width:"calc(2rem - 12px)",backgroundColor:"$secondary",borderRadius:"100%",boxShadow:"2px 2px 5px #0001",transition:"$all",transform:"translateX(6px)",willChange:"transform",'&[data-state="checked"]':{transform:"translateX(calc(1.236rem + 6px))"}}),Pn=d("div",{display:"flex",alignItems:"center",paddingLeft:"1.618rem"}),Mn=d("label",{fontSize:"0.8333rem",fontFamily:"$sans",fontWeight:"400",lineHeight:"1em",userSelect:"none",cursor:"pointer",color:"$primary",opacity:"0.7",paddingRight:"0.618rem"}),On=d("form",{});var Ba=()=>{let t=ee(),[e,r]=(0,B.useState)(!0);return(0,B.useEffect)(()=>{t({type:"updateInformationExpanded",informationExpanded:e})},[e]),B.default.createElement(On,null,B.default.createElement(Pn,null,B.default.createElement(Mn,{htmlFor:"information-toggle",css:e?{opacity:"1"}:{}},"More Information"),B.default.createElement(Tn,{checked:e,onCheckedChange:()=>r(!e),id:"information-toggle"},B.default.createElement(kn,null))))},Rn=Ba;var Ua=({manifestId:t,manifestLabel:e})=>{let r=O(),{collection:n,configOptions:o}=r,{showTitle:i,showIIIFBadge:a,showInformationToggle:s}=o;return!(n!=null&&n.items)&&!i&&!a&&!s?D.default.createElement(D.default.Fragment,null):D.default.createElement(In,{className:"clover-header"},n!=null&&n.items?D.default.createElement(En,null):D.default.createElement(wn,null,D.default.createElement(Ln.Label,{label:e})),a&&D.default.createElement(Nn.Popover,null,D.default.createElement(Cn,null,D.default.createElement(Sn,null)),D.default.createElement(xn,null,(n==null?void 0:n.items)&&D.default.createElement("button",{onClick:l=>{l.preventDefault(),window.open(n.id,"_blank")}},"View Collection"),D.default.createElement("button",{onClick:l=>{l.preventDefault(),window.open(t,"_blank")}},"View Manifest")," ",(n==null?void 0:n.items)&&D.default.createElement(Nt,{textPrompt:"Copy Collection URL",textToCopy:n.id}),D.default.createElement(Nt,{textPrompt:"Copy Manifest URL",textToCopy:t}))),s&&D.default.createElement(Rn,null))},Fn=Ua;var z=y(require("react"));var W=y(require("react"));var Dn=y(require("@radix-ui/react-radio-group"));var $n=d(Dn.Root,{display:"flex",flexDirection:"row",flexGrow:"1",padding:"1.618rem",overflowX:"scroll",position:"relative",zIndex:"0"});var N=y(require("react"));var qa=t=>{var e=t.toString().split(":"),r=Math.ceil(parseInt(e[0])),n=Math.ceil(parseInt(e[1])),o=Ha(Math.ceil(parseInt(e[2])),2);let a=`${r!==0&&n<10?(n+"").padStart(2,"0"):n}:${o}`;return r!==0&&(a=`${r}:${a}`),a},Ze=t=>{let e=new Date(t*1e3).toISOString().substr(11,8);return qa(e)};var Ha=(t,e)=>String(t).padStart(e,"0");var re=require("@nulib/design-system");var Vn=y(require("@radix-ui/react-radio-group"));var Lt=require("@nulib/design-system"),Xe=d("span",{display:"flex"}),Wn=d("span",{display:"flex",width:"1.2111rem",height:"0.7222rem"}),jn=d("span",{display:"inline-flex",marginLeft:"5px",marginBottom:"-1px"}),zn=d(Vn.Item,{display:"flex",flexShrink:"0",margin:"0 1.618rem 0 0",padding:"0",cursor:"pointer",background:"none",border:"none",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",textAlign:"left","&:last-child":{marginRight:"1rem"},figure:{margin:"0",width:"161.8px","> div":{position:"relative",display:"flex",backgroundColor:"$secondaryAlt",width:"inherit",height:"100px",overflow:"hidden",borderRadius:"3px",transition:"$all",img:{width:"100%",height:"100%",objectFit:"cover",filter:"blur(0)",transform:"scale3d(1, 1, 1)",transition:"$all",color:"transparent"},[`& ${Xe}`]:{position:"absolute",right:"0",bottom:"0",[`& ${Lt.Tag}`]:{margin:"0",paddingLeft:"0",fontSize:"0.7222rem",backgroundColor:"#000d",color:"$secondary",fill:"$secondary",borderBottomLeftRadius:"0",borderTopRightRadius:"0"}}},figcaption:{marginTop:"0.5rem",color:"$primaryMuted",fontWeight:"400",fontSize:"0.8333rem",display:"-webkit-box",overflow:"hidden",MozBoxOrient:"vertical",WebkitLineClamp:"5","@sm":{fontSize:"0.8333rem"}}},"&[aria-checked='true']":{figure:{"> div":{backgroundColor:"$primaryAlt","&::before":{position:"absolute",zIndex:"1",color:"$secondaryMuted",content:"Active Item",textTransform:"uppercase",fontWeight:"700",fontSize:"0.6111rem",letterSpacing:"0.03rem",display:"flex",width:"100%",height:"100%",flexDirection:"column",justifyContent:"center",textAlign:"center",textShadow:"5px 5px 5px #0003"},img:{opacity:"0.3",transform:"scale3d(1.1, 1.1, 1.1)",filter:"blur(2px)"},[`& ${Xe}`]:{[`& ${Lt.Tag}`]:{backgroundColor:"$accent"}}}},figcaption:{fontWeight:"700",color:"$primary"}}});var _n=require("@samvera/nectar-iiif");var Ga=({type:t})=>{switch(t){case"Sound":return N.default.createElement(re.Icon.Audio,null);case"Image":return N.default.createElement(re.Icon.Image,null);case"Video":return N.default.createElement(re.Icon.Video,null);default:return N.default.createElement(re.Icon.Image,null)}},Qa=({canvas:t,canvasIndex:e,isActive:r,thumbnail:n,type:o,handleChange:i})=>N.default.createElement(zn,{"aria-checked":r,"data-testid":"media-thumbnail","data-canvas":e,onClick:()=>i(t.id),value:t.id},N.default.createElement("figure",null,N.default.createElement("div",null,(n==null?void 0:n.id)&&N.default.createElement("img",{src:n.id,alt:t!=null&&t.label?K(t.label):""}),N.default.createElement(Xe,null,N.default.createElement(re.Tag,{isIcon:!0,"data-testid":"thumbnail-tag"},N.default.createElement(Wn,null),N.default.createElement(re.Icon,{"aria-label":o},N.default.createElement(Ga,{type:o})),["Video","Sound"].includes(o)&&N.default.createElement(jn,null,Ze(t.duration))))),(t==null?void 0:t.label)&&N.default.createElement("figcaption",{"data-testid":"fig-caption"},N.default.createElement(_n.Label,{label:t.label})))),Bn=Qa;var Un=t=>t.body?t.body.type:"Image";var I=y(require("react"));var Ft=d("div",{position:"absolute",right:"1rem",top:"1rem",display:"flex",justifyContent:"flex-end",zIndex:"1"}),qn=d("input",{flexGrow:"1",border:"none",backgroundColor:"$secondaryMuted",color:"$primary",marginRight:"1rem",height:"2rem",padding:"0 1rem",borderRadius:"2rem",fontFamily:"$sans",fontSize:"1rem",lineHeight:"1rem",boxShadow:"inset 1px 1px 2px #0003","&::placeholder":{color:"$primaryMuted"}}),Je=d("button",{display:"flex",background:"none",border:"none",width:"2rem !important",height:"2rem !important",padding:"0",margin:"0",fontWeight:"700",borderRadius:"2rem",backgroundColor:"$accent",color:"$secondary",cursor:"pointer",boxSizing:"content-box !important",transition:"$all",svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",opacity:"1",filter:"drop-shadow(5px 5px 5px #000D)",boxSizing:"inherit",transition:"$all"},"&:disabled":{backgroundColor:"transparent",boxShadow:"none",svg:{opacity:"0.25"}}}),Hn=d("div",{display:"flex",marginRight:"0.618rem",backgroundColor:"$accentAlt",borderRadius:"2rem",boxShadow:"5px 5px 5px #0003",color:"$secondary",alignItems:"center","> span":{display:"flex",margin:"0 0.5rem",fontSize:"0.7222rem"}}),Gn=d("div",{display:"flex",position:"relative",zIndex:"1",width:"100%",padding:"0",transition:"$all",variants:{isToggle:{true:{paddingTop:"2.618rem",[`& ${Ft}`]:{width:"calc(100% - 2rem)","@sm":{width:"calc(100% - 2rem)"}}}}}});var Qn=require("react"),Ya=(t,e)=>{(0,Qn.useEffect)(()=>{function r(n){n.key===t&&e()}return window.addEventListener("keyup",r),()=>window.removeEventListener("keyup",r)},[])},Yn=Ya;var Ka=()=>I.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},I.default.createElement("title",null,"Arrow Back"),I.default.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M244 400L100 256l144-144M120 256h292"})),Za=()=>I.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},I.default.createElement("title",null,"Arrow Forward"),I.default.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M268 112l144 144-144 144M392 256H100"})),Xa=()=>I.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},I.default.createElement("title",null,"Close"),I.default.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),Ja=()=>I.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},I.default.createElement("title",null,"Search"),I.default.createElement("path",{d:"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z"})),es=({handleCanvasToggle:t,handleFilter:e,activeIndex:r,canvasLength:n})=>{let[o,i]=(0,I.useState)(!1),[a,s]=(0,I.useState)(!1),[l,p]=(0,I.useState)(!1);(0,I.useEffect)(()=>{p(r===0),r===n-1?s(!0):s(!1)},[r]),Yn("Escape",()=>{i(!1),e("")});let v=()=>{i(b=>!b),e("")};return I.default.createElement(Gn,{isToggle:o},I.default.createElement(Ft,null,o&&I.default.createElement(qn,{autoFocus:!0,onChange:b=>e(b.target.value),placeholder:"Search"}),!o&&I.default.createElement(Hn,null,I.default.createElement(Je,{onClick:()=>t(-1),disabled:l,type:"button"},I.default.createElement(Ka,null)),I.default.createElement("span",null,r+1," of ",n),I.default.createElement(Je,{onClick:()=>t(1),disabled:a,type:"button"},I.default.createElement(Za,null))),I.default.createElement(Je,{onClick:v,type:"button"},o?I.default.createElement(Xa,null):I.default.createElement(Ja,null))))},Kn=es;var ts=({items:t})=>{let e=ee(),r=O(),{activeCanvas:n,vault:o}=r,[i,a]=(0,W.useState)(""),[s,l]=(0,W.useState)([]),[p,v]=(0,W.useState)(0),h=W.default.useRef(null),b="painting",w=["Image","Sound","Video"],g=u=>{n!==u&&e({type:"updateActiveCanvas",canvasId:u})};return(0,W.useEffect)(()=>{if(!s.length){let u=t.map(m=>de(o,m,b,w)).filter(m=>m.annotations.length>0);l(u)}},[]),(0,W.useEffect)(()=>{s.forEach((u,m)=>{u!=null&&u.canvas&&u.canvas.id===n&&v(m)})},[n]),(0,W.useEffect)(()=>{let u=document.querySelector(`[data-canvas="${p}"]`);if(u instanceof HTMLElement&&h.current){let m=u.offsetLeft-h.current.offsetWidth/2+u.offsetWidth/2;h.current.scrollTo({left:m,behavior:"smooth"})}},[p]),W.default.createElement(W.default.Fragment,null,W.default.createElement(Kn,{handleFilter:u=>a(u),handleCanvasToggle:u=>{let m=s[p+u];m!=null&&m.canvas&&g(m.canvas.id)},activeIndex:p,canvasLength:s.length}),W.default.createElement($n,{"aria-label":"select item","data-testid":"media",ref:h},s.filter(u=>{var m;if((m=u.canvas)!=null&&m.label){let C=K(u.canvas.label);if(Array.isArray(C))return C[0].toLowerCase().includes(i.toLowerCase())}}).map((u,m)=>{var C,S;return W.default.createElement(Bn,{canvas:u.canvas,canvasIndex:m,handleChange:g,isActive:n===((C=u==null?void 0:u.canvas)==null?void 0:C.id),key:(S=u==null?void 0:u.canvas)==null?void 0:S.id,thumbnail:Et(o,u,200,200),type:Un(u.annotations[0])})})))},Zn=ts;var L=y(require("react"));var ne=y(require("@radix-ui/react-tabs"));var Xn=d(ne.Root,{display:"flex",flexDirection:"column",width:"100%",height:"100%",flexGrow:"1",flexShrink:"0",position:"relative",zIndex:"1",boxShadow:"-5px -5px 5px #00000011","@sm":{marginTop:"0.5rem",boxShadow:"none"},"&:after":{position:"absolute",bottom:0,content:"",width:"100%",height:"1rem",backgroundImage:"linear-gradient(0deg, #FFFFFF 0%, #FFFFFF00 100%)",zIndex:1,"@sm":{backgroundImage:"none"}}}),Jn=d(ne.List,{display:"flex",flexGrow:"0",margin:"0 1.618rem",borderBottom:"4px solid $secondaryAlt",backgroundColor:"$secondary","@sm":{margin:"0 1rem"}}),Dt=d(ne.Trigger,{display:"flex",position:"relative",padding:"0.5rem 1rem",background:"none",backgroundColor:"transparent",color:"$primaryMuted",border:"none",fontFamily:"inherit",fontSize:"1rem",marginRight:"1rem",lineHeight:"1rem",whiteSpace:"nowrap",cursor:"pointer",fontWeight:700,transition:"$all","&::after":{width:"0",height:"4px",content:"",backgroundColor:"$primaryMuted",position:"absolute",bottom:"-4px",left:"0",transition:"$all"},"&:hover":{color:"$primary"},"&[data-state='active']":{color:"$accent","&::after":{width:"100%",backgroundColor:"$accent"}}}),$t=d(ne.Content,{display:"flex",flexGrow:"1",flexShrink:"0",position:"absolute",top:"0",left:"0","&[data-state='active']":{width:"100%",height:"calc(100% - 2rem)",padding:"1rem 0"}}),eo=d("div",{position:"relative",height:"100%",width:"100%",overflowY:"scroll"});var Se=y(require("react"));var et=y(require("@radix-ui/react-radio-group"));var to=cn({from:{transform:"rotate(360deg)"},to:{transform:"rotate(0deg)"}}),ro=d(et.Root,{display:"flex",flexDirection:"column",width:"100%"}),tt=d(et.Item,{position:"relative",cursor:"pointer",display:"flex",width:"100%",justifyContent:"space-between",textAlign:"left",margin:"0",padding:"0.5rem 1.618rem",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",color:"$primaryMuted",border:"none",background:"none","@sm":{padding:"0.5rem 1rem",fontSize:"0.8333rem"},"&::before":{content:"",width:"12px",height:"12px",borderRadius:"12px",position:"absolute",backgroundColor:"$primaryMuted",opacity:"0",left:"8px",marginTop:"3px",boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",opacity:"0",clipPath:"polygon(100% 50%, 0 100%, 0 0)",left:"13px",marginTop:"6px",boxSizing:"content-box","@sm":{content:"unset"}},strong:{marginLeft:"1rem"},"&:hover":{color:"$accent","&::before":{backgroundColor:"$accent",opacity:"1"},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",clipPath:"polygon(100% 50%, 0 100%, 0 0)",opacity:"1"}},"&[aria-checked='true']":{color:"$primary",backgroundColor:"$secondaryMuted",fontFamily:"$sansBold","&::before":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accentMuted",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1s linear infinite",animationName:to,boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accent",clipPath:"polygon(100% 0, 100% 100%, 0 0)",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1.5s linear infinite",animationName:to,boxSizing:"content-box","@sm":{content:"unset"}}}});var no=require("uuid"),rs=()=>{function t(o){return o.map(a=>{let s=a.identifier||(0,no.v4)();return{...a,identifier:s}})}function e(o){let i=t(o);function a(l,p){let v=[];return l.forEach(h=>{let w=l.filter(g=>h.start>=g.start&&h.end<=g.end&&h.identifier!==g.identifier).sort((g,x)=>{let c=g.end-g.start,u=x.end-x.start;return c===u?0:c<u?-1:1})[0];if(!w&&!p||(w==null?void 0:w.identifier)===p){let g=a(l,h.identifier);g.length&&(h.children=g),v.push(h)}}),v}return a(i,null)}function r(o,i=[]){return i.some(a=>o.start>=a.start&&o.end<=a.end)}function n(o=[]){return o.sort((i,a)=>i.start-a.start)}return{addIdentifiersToParsedCues:t,createNestedCues:e,isChild:r,orderCuesByTime:n}},oo=rs;var Ve=y(require("react"));var rt=y(require("react"));var De=y(require("react")),io={currentTime:0,startTime:0,updateStartTime:()=>{},updateCurrentTime:()=>{}},$e=De.default.createContext(io),ao=({children:t})=>{let[e,r]=De.default.useState(io.currentTime),[n,o]=De.default.useState(0),i=s=>o(s),a=s=>r(s);return De.default.createElement($e.Provider,{value:{currentTime:e,startTime:n,updateStartTime:i,updateCurrentTime:a}},t)};var ns=({label:t,start:e,end:r})=>{let{currentTime:n,updateStartTime:o}=rt.default.useContext($e),i=e<=n&&n<r;return rt.default.createElement(tt,{"aria-checked":i,"data-testid":"navigator-cue",onClick:()=>{o(e)},value:t},t,rt.default.createElement("strong",null,Ze(e)))},so=ns;var lo=d("ul",{listStyle:"none",paddingLeft:"1rem",position:"relative","&&:first-child":{paddingLeft:"0"},"& li ul":{[`& ${tt}`]:{backgroundColor:"unset","&::before":{content:"none"},"&::after":{content:"none"}}},"&:first-child":{margin:"0 0 1.618rem"}});var co=({items:t})=>Ve.default.createElement(lo,null,t.map(({text:e,start:r,end:n,children:o,identifier:i})=>Ve.default.createElement("li",{key:i},Ve.default.createElement(so,{label:e,start:r,end:n}),o&&Ve.default.createElement(co,{items:o})))),uo=co;var po=require("node-webvtt"),os=({resource:t})=>{let[e,r]=Se.default.useState([]),{id:n,label:o}=t,{createNestedCues:i,orderCuesByTime:a}=oo();return(0,Se.useEffect)(()=>{fetch(n,{headers:{"Content-Type":"text/plain",Accept:"application/json"}}).then(s=>s.text()).then(s=>{let l=(0,po.parse)(s).cues,p=a(l),v=i(p);r(v)}).catch(s=>console.error(n,s.toString()))},[n]),Se.default.createElement(ro,{"aria-label":`navigate ${K(o,"en")}`},Se.default.createElement(uo,{items:e}))},fo=os;var Io=require("@samvera/nectar-iiif");var mo=d("div",{padding:" 0 1.618rem 2rem",display:"flex",flexDirection:"column",overflow:"scroll",position:"absolute",color:"$primary",fontFamily:"$sans",fontWeight:"400",fontSize:"1rem",zIndex:"0",img:{maxWidth:"100px",maxHeight:"100px",objectFit:"contain",color:"transparent",margin:"0 0 1rem",borderRadius:"3px",backgroundColor:"$secondaryMuted"},video:{display:"none"},"a, a:visited":{color:"$accent"},p:{fontSize:"1rem",lineHeight:"1.45em",margin:"0"},dl:{margin:"0",dt:{fontWeight:"700",margin:"1rem 0 0.25rem"},dd:{margin:"0"}},".manifest-property-title":{fontWeight:"700",margin:"1rem 0 0.25rem"},"ul, ol":{padding:"0",margin:"0",li:{fontSize:"1rem",lineHeight:"1.45em",listStyle:"none",margin:"0.25rem 0 0.25rem"}}}),ho=d("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"});var go=require("@samvera/nectar-iiif"),fe=y(require("react")),is=({homepage:t})=>(t==null?void 0:t.length)===0?fe.default.createElement(fe.default.Fragment,null):fe.default.createElement(fe.default.Fragment,null,fe.default.createElement("span",{className:"manifest-property-title"},"Homepage"),fe.default.createElement(go.Homepage,{homepage:t})),Vt=is;var We=y(require("react")),as=({id:t,htmlLabel:e,parent:r="manifest"})=>We.default.createElement(We.default.Fragment,null,We.default.createElement("span",{className:"manifest-property-title"},e),We.default.createElement("a",{href:t,target:"_blank",id:`iiif-${r}-id`},t)),Wt=as;var Ae=y(require("react")),yo=require("@samvera/nectar-iiif"),ss=({metadata:t,parent:e="manifest"})=>t?Ae.default.createElement(Ae.default.Fragment,null,Ae.default.createElement(yo.Metadata,{metadata:t,id:`iiif-${e}-metadata`})):Ae.default.createElement(Ae.default.Fragment,null),jt=ss;var Ee=y(require("react")),vo=require("@samvera/nectar-iiif"),ls=({requiredStatement:t,parent:e="manifest"})=>t?Ee.default.createElement(Ee.default.Fragment,null,Ee.default.createElement(vo.RequiredStatement,{requiredStatement:t,id:`iiif-${e}-required-statement`})):Ee.default.createElement(Ee.default.Fragment,null),zt=ls;var me=y(require("react")),cs=({rights:t})=>t?me.default.createElement(me.default.Fragment,null,me.default.createElement("span",{className:"manifest-property-title"},"Rights"),me.default.createElement("a",{href:t,target:"_blank"},t)):me.default.createElement(me.default.Fragment,null),_t=cs;var bo=require("@samvera/nectar-iiif"),he=y(require("react")),us=({seeAlso:t})=>(t==null?void 0:t.length)===0?he.default.createElement(he.default.Fragment,null):he.default.createElement(he.default.Fragment,null,he.default.createElement("span",{className:"manifest-property-title"},"See Also"),he.default.createElement(bo.SeeAlso,{seeAlso:t})),Bt=us;var Te=y(require("react")),Co=require("@samvera/nectar-iiif"),ds=({summary:t,parent:e="manifest"})=>t?Te.default.createElement(Te.default.Fragment,null,Te.default.createElement(Co.Summary,{summary:t,as:"p",id:`iiif-${e}-summary`})):Te.default.createElement(Te.default.Fragment,null),Ut=ds;var ke=y(require("react")),xo=require("@samvera/nectar-iiif"),ps=({label:t,thumbnail:e})=>(e==null?void 0:e.length)===0?ke.default.createElement(ke.default.Fragment,null):ke.default.createElement(ke.default.Fragment,null,ke.default.createElement(xo.Thumbnail,{altAsLabel:t||{none:["resource"]},thumbnail:e})),qt=ps;var T=y(require("react"));var fs=()=>{let t=O(),{activeManifest:e,vault:r}=t,[n,o]=(0,T.useState)(),[i,a]=(0,T.useState)([]),[s,l]=(0,T.useState)([]),[p,v]=(0,T.useState)([]);return(0,T.useEffect)(()=>{var b,w,g;let h=r.get(e);o(h),((b=h.homepage)==null?void 0:b.length)>0&&a(r.get(h.homepage)),((w=h.seeAlso)==null?void 0:w.length)>0&&l(r.get(h.seeAlso)),((g=h.thumbnail)==null?void 0:g.length)>0&&v(r.get(h.thumbnail))},[e,r]),n?T.default.createElement(ho,null,T.default.createElement(mo,null,T.default.createElement(qt,{thumbnail:p,label:n.label}),T.default.createElement(Ut,{summary:n.summary}),T.default.createElement(jt,{metadata:n.metadata}),T.default.createElement(zt,{requiredStatement:n.requiredStatement}),T.default.createElement(_t,{rights:n.rights}),T.default.createElement(Vt,{homepage:i}),T.default.createElement(Bt,{seeAlso:s}),T.default.createElement(Wt,{id:n.id,htmlLabel:"IIIF Manifest"}))):T.default.createElement(T.default.Fragment,null)},wo=fs;var ms=({activeCanvas:t,resources:e})=>{let r=O(),{configOptions:n}=r,{renderAbout:o}=n,[i,a]=(0,L.useState)();(0,L.useEffect)(()=>{o?a("manifest-about"):e&&(e==null?void 0:e.length)>0&&!o&&a(e[0].id)},[t,e]);let s=l=>{a(l)};return e?L.default.createElement(Xn,{"data-testid":"navigator",defaultValue:i,onValueChange:s,orientation:"horizontal",value:i},L.default.createElement(Jn,{"aria-label":"select chapter","data-testid":"navigator-list"},o&&L.default.createElement(Dt,{value:"manifest-about"},"About"),e&&e.map(({id:l,label:p})=>L.default.createElement(Dt,{key:l,value:l},L.default.createElement(Io.Label,{label:p})))),L.default.createElement(eo,null,o&&L.default.createElement($t,{value:"manifest-about"},L.default.createElement(wo,null)),e&&e.map(l=>L.default.createElement($t,{key:l.id,value:l.id},L.default.createElement(fo,{resource:l}))))):L.default.createElement(L.default.Fragment,null)},So=ms;var U=y(require("react")),Pe=y(require("hls.js"));var Ao=d("div",{position:"relative",backgroundColor:"$primaryAlt",display:"flex",flexGrow:"0",flexShrink:"1",maxHeight:"500px",zIndex:"1",video:{backgroundColor:"transparent",display:"flex",position:"relative",objectFit:"contain",width:"100%",height:"100%",zIndex:"1"}});var je=y(require("react"));var Eo=d("canvas",{position:"absolute",width:"100%",height:"100%"});var hs=je.default.forwardRef((t,e)=>{let r=je.default.useRef(null);je.default.useEffect(()=>{!e||(e.current.onplay=n)},[e]);function n(){let i=e.current,a=new AudioContext,s=a.createMediaElementSource(i),l=a.createAnalyser(),p=r.current;if(!p)return;p.width=i.offsetWidth,p.height=i.offsetHeight;let v=p.getContext("2d");s.connect(l),l.connect(a.destination),l.fftSize=256;let h=l.frequencyBinCount,b=new Uint8Array(h);setInterval(function(){o(l,v,h,b,p.width,p.height)},20)}function o(i,a,s,l,p,v){let h=p/s*2.6,b,w=0;i.getByteFrequencyData(l),a.fillStyle="#000000",a.fillRect(0,0,p,v);for(let g=0;g<s;g++)b=l[g]*2,a.fillStyle=`rgba(${78}, 42, 132, 1)`,a.fillRect(w,v-b,h,b),w+=h+6}return je.default.createElement(Eo,{ref:r})}),To=hs;var ko=y(require("react"));var gs=({resource:t,ignoreCaptionLabels:e})=>{let r=K(t.label,"en");return r.some(o=>e.includes(o))?null:ko.default.createElement("track",{key:t.id,src:t.id,label:r,srcLang:"en","data-testid":"player-track"})},Po=gs;var ys=({painting:t,resources:e})=>{var w;let r=U.default.useRef(null),n=(w=t==null?void 0:t.format)==null?void 0:w.includes("audio/"),{startTime:o,updateCurrentTime:i}=U.default.useContext($e),a=O(),{activeCanvas:s,configOptions:l,vault:p}=a,v=de(p,{id:s,type:"Canvas"},"painting",["Image"]),h=It(v.accompanyingCanvas);U.default.useEffect(()=>{if(!t.id||!r.current||t.id.split(".").pop()!=="m3u8")return;let g=new Pe.default;return g.attachMedia(r.current),g.on(Pe.default.Events.MEDIA_ATTACHED,function(){g.loadSource(t.id)}),g.on(Pe.default.Events.ERROR,function(x,c){if(c.fatal)switch(c.type){case Pe.default.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${x} network error encountered, try to recover`),g.startLoad();break;case Pe.default.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${x} media error encountered, try to recover`),g.recoverMediaError();break;default:g.destroy();break}}),()=>{g&&(g.detachMedia(),g.destroy(),i(0))}},[t.id]),U.default.useEffect(()=>{let g=r.current;g&&(g.currentTime=o),o!==0&&g.play()},[o]);let b=()=>{let g=r.current;g&&(g.ontimeupdate=x=>{i(x.target.currentTime)})};return U.default.createElement(Ao,{css:{backgroundColor:l.canvasBackgroundColor,maxHeight:l.canvasHeight}},U.default.createElement("video",{id:"clover-iiif-video",key:t.id,ref:r,controls:!0,height:t.height,width:t.width,onPlay:b,crossOrigin:"anonymous",poster:h},U.default.createElement("source",{src:t.id,type:t.format}),e.length>0&&e.map(g=>U.default.createElement(Po,{resource:g,ignoreCaptionLabels:l.ignoreCaptionLabels,key:g.id})),"Sorry, your browser doesn't support embedded videos."),n&&U.default.createElement(To,{ref:r}))},Mo=ys;var ge=y(require("react"));var q=y(require("react")),Ht=y(require("openseadragon"));var Oo=d("div",{position:"absolute !important",zIndex:"1",top:"1rem",left:"1rem",width:"161.8px",height:"100px",backgroundColor:"#000D",boxShadow:"5px 5px 5px #0002",borderRadius:"3px",".displayregion":{border:" 3px solid $accent !important",boxShadow:"0 0 3px #0006"},"@sm":{width:"123px",height:"76px"}}),Ro=d("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),No=d("div",{width:"100%",height:"61.8vh",maxHeight:"100vh",background:"black",backgroundSize:"contain",color:"white",position:"relative",zIndex:"1",overflow:"hidden"});var j=y(require("react"));var nt=y(require("react"));var Lo=d("button",{display:"flex",height:"2rem",width:"2rem",borderRadius:"2rem",padding:"0",margin:"0",fontFamily:"inherit",background:"none",border:"none",color:"white",cursor:"pointer",marginLeft:"0.618rem",backgroundColor:"#000D",filter:"drop-shadow(5px 5px 5px #0006)",transition:"$all",boxSizing:"content-box !important",svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",filter:"drop-shadow(5px 5px 5px #000D)",transition:"$all",boxSizing:"inherit"},"&:hover, &:focus":{backgroundColor:"$accent"},"&#zoomReset":{"&:hover, &:focus":{svg:{rotate:"45deg"}}}});var vs=({id:t,label:e,children:r})=>nt.default.createElement(Lo,{id:t,"data-testid":"openseadragon-button"},nt.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":`${t}-svg-title`,"data-testid":"openseadragon-button-svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},nt.default.createElement("title",{id:`${t}-svg-title`},e),r)),ot=vs;var Fo=d("div",{position:"absolute",zIndex:"1",top:"1rem",right:"1rem"});var bs=()=>j.default.createElement(Fo,{"data-testid":"openseadragon-controls",id:"openseadragon-controls"},j.default.createElement(ot,{id:"zoomIn",label:"zoom in"},j.default.createElement(()=>j.default.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M256 112v288M400 256H112"}),null)),j.default.createElement(ot,{id:"zoomOut",label:"zoom in"},j.default.createElement(()=>j.default.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 256H112"}),null)),j.default.createElement(ot,{id:"zoomReset",label:"reset zoom"},j.default.createElement(()=>j.default.createElement(j.default.Fragment,null,j.default.createElement("path",{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128"}),j.default.createElement("path",{d:"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z"})),null))),Do=bs;var $o=t=>fetch(`${t.replace(/\/$/,"")}/info.json`).then(e=>e.json()).then(e=>e).catch(e=>{console.error(`The IIIF tilesource ${t.replace(/\/$/,"")}/info.json failed to load: ${e}`)}),Vo=t=>{let e,r;if(Array.isArray(t)&&(e=t[0],e)){let n;"@id"in e?n=e["@id"]:n=e.id,r=n}return r};var Wo=require("uuid");var Cs=({uri:t,imageType:e})=>{let[r,n]=(0,q.useState)(),o=O(),{configOptions:i}=o,a=(0,Wo.v4)(),s={id:`openseadragon-viewport-${a}`,loadTilesWithAjax:!0,homeButton:"zoomReset",showFullPageControl:!1,zoomInButton:"zoomIn",zoomOutButton:"zoomOut",showNavigator:!0,navigatorBorderColor:"transparent",navigatorId:`openseadragon-navigator-${a}`,gestureSettingsMouse:{clickToZoom:!0,dblClickToZoom:!0,pinchToZoom:!0,scrollToZoom:!1}};return(0,q.useEffect)(()=>{t!==r&&n(t)},[]),(0,q.useEffect)(()=>{if(r)switch(e){case"simpleImage":(0,Ht.default)(s).addSimpleImage({url:r});break;case"tiledImage":$o(r).then(l=>(0,Ht.default)(s).addTiledImage({tileSource:l}));break;default:console.warn(`Unable to render ${r} in OpenSeadragon as type: "${e}"`);break}},[r]),q.default.createElement(No,{css:{backgroundColor:i.canvasBackgroundColor,height:i.canvasHeight}},q.default.createElement(Do,null),q.default.createElement(Oo,{id:`openseadragon-navigator-${a}`}),q.default.createElement(Ro,{id:`openseadragon-viewport-${a}`}))},jo=Cs;var xs=({body:t})=>{let[e,r]=(0,ge.useState)(),[n,o]=(0,ge.useState)();return(0,ge.useEffect)(()=>{Array.isArray(t.service)&&t.service.length>0?(r("tiledImage"),o(Vo(t.service))):(r("simpleImage"),o(t.id))},[t]),ge.default.createElement(jo,{uri:n,key:n,imageType:e})},zo=xs;var _o=require("@nulib/design-system");var ws=({activeCanvas:t,painting:e,resources:r,items:n,isAbout:o,isInformation:i,isNavigator:a,isNavigatorOpen:s,isMedia:l})=>z.default.createElement(Pt,{className:"clover-content"},z.default.createElement(ao,null,z.default.createElement(Mt,null,l?z.default.createElement(Mo,{painting:e,resources:r}):e&&z.default.createElement(zo,{body:e,key:t}),z.default.createElement(un,null,z.default.createElement(_o.Button,{as:"span"},s?"View Items":"More Information")),n.length>1&&z.default.createElement(kt,{className:"clover-canvases"},z.default.createElement(Zn,{items:n,activeItem:0}))),i&&(o||a)&&z.default.createElement(dn,null,z.default.createElement(Ot,null,z.default.createElement(So,{activeCanvas:t,resources:r}))))),Bo=ws;var it=y(require("react"));var Uo=d("div",{display:"flex",flexDirection:"column",alignItems:"center"}),qo=d("p",{fontFamily:"$display",fontWeight:"bold",fontSize:"x-large"}),Ho=d("span",{fontSize:"medium"});var Is=({error:t})=>{let{message:e}=t;return it.default.createElement(Uo,{role:"alert"},it.default.createElement(qo,{"data-testid":"headline"},"Something went wrong"),e&&it.default.createElement(Ho,null,`Error message: ${e}`," "))},Go=Is;var Yo=require("react-error-boundary"),Ss=({manifest:t,theme:e})=>{let r=O(),{activeCanvas:n,informationExpanded:o,vault:i,configOptions:a}=r,[s,l]=(0,$.useState)(!1),[p,v]=(0,$.useState)(!1),[h,b]=(0,$.useState)(!0),[w,g]=(0,$.useState)(void 0),[x,c]=(0,$.useState)([]),[u,m]=mn(!1),C=fn(Tt.sm);return(0,$.useEffect)(()=>{if(!C){b(!0);return}b(!1)},[C]),(0,$.useEffect)(()=>{if(!C){m(!1);return}m(h)},[h]),(0,$.useEffect)(()=>{let S=St(i,n),A=At(i,n,"text/vtt");S&&(l(["Sound","Video"].indexOf(S.type)>-1),g({...S})),c(A),v(A.length!==0)},[n]),$.default.createElement(Yo.ErrorBoundary,{FallbackComponent:Go},$.default.createElement(pn,{className:`${e} clover-iiif`,"data-body-locked":u,"data-navigator":p,"data-navigator-open":h},$.default.createElement(Qo.Root,{open:h,onOpenChange:b},$.default.createElement(Fn,{manifestLabel:t.label,manifestId:t.id}),$.default.createElement(Bo,{activeCanvas:n,painting:w,resources:x,items:t.items,isAbout:a.renderAbout,isMedia:s,isInformation:o,isNavigator:p,isNavigatorOpen:h}))))},Ko=Ss;var Zo=require("@stitches/react"),As=({canvasIdCallback:t=()=>{},customTheme:e,id:r,manifestId:n,options:o})=>k.default.createElement(k.default.Fragment,null,"Testing... Clover... ",r,k.default.createElement(an,null,k.default.createElement(Es,{id:r,manifestId:n,canvasIdCallback:t,customTheme:e,options:o}))),Es=({canvasIdCallback:t,customTheme:e,id:r,manifestId:n,options:o})=>{let i=ee(),a=O(),{activeCanvas:s,activeManifest:l,isLoaded:p,vault:v}=a,[h,b]=(0,k.useState)(),[w,g]=(0,k.useState)(),x={};return e&&(x=(0,Zo.createTheme)("custom",e)),(0,k.useEffect)(()=>{t&&t(s)},[s]),(0,k.useEffect)(()=>{l&&v.loadManifest(l).then(c=>{g(c),i({type:"updateActiveCanvas",canvasId:c.items[0]&&c.items[0].id})}).catch(c=>{console.error(`Manifest failed to load: ${c}`)}).finally(()=>{i({type:"updateIsLoaded",isLoaded:!0})})},[l]),(0,k.useEffect)(()=>{let c=r;n&&(c=n),i({type:"updateConfigOptions",configOptions:o}),v.load(c).then(u=>{b(u)}).catch(u=>{console.error(`The IIIF resource ${c} failed to load: ${u}`)})},[r,o]),(0,k.useEffect)(()=>{let c=[];(h==null?void 0:h.type)==="Collection"?(i({type:"updateCollection",collection:h}),c=h.items.filter(u=>u.type==="Manifest").map(u=>u.id),c.length>0&&i({type:"updateActiveManifest",manifestId:c[0]})):(h==null?void 0:h.type)==="Manifest"&&i({type:"updateActiveManifest",manifestId:h.id})},[h]),p?!w||!w.items?(console.log(`The IIIF manifest ${n} failed to load.`),k.default.createElement(k.default.Fragment,null)):w.items.length===0?(console.log(`The IIIF manifest ${n} does not contain canvases.`),k.default.createElement(k.default.Fragment,null)):k.default.createElement(Ko,{manifest:w,theme:x,key:w.id}):k.default.createElement(k.default.Fragment,null,"Loading")},Ts=As;
//# sourceMappingURL=index.cjs.js.map
